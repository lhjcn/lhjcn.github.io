import{g as At}from"./ali-oss-Ci4CXxfL.js";var st={exports:{}},bt=st.exports,Rt;function Et(){return Rt||(Rt=1,function(xt,Ot){(function(ae,I){xt.exports=I()})(bt,function(){return function(V){var ae={};function I(M){if(ae[M])return ae[M].exports;var U=ae[M]={i:M,l:!1,exports:{}};return V[M].call(U.exports,U,U.exports,I),U.l=!0,U.exports}return I.m=V,I.c=ae,I.d=function(M,U,s){I.o(M,U)||Object.defineProperty(M,U,{enumerable:!0,get:s})},I.r=function(M){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})},I.t=function(M,U){if(U&1&&(M=I(M)),U&8||U&4&&typeof M=="object"&&M&&M.__esModule)return M;var s=Object.create(null);if(I.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:M}),U&2&&typeof M!="string")for(var L in M)I.d(s,L,(function(P){return M[P]}).bind(null,L));return s},I.n=function(M){var U=M&&M.__esModule?function(){return M.default}:function(){return M};return I.d(U,"a",U),U},I.o=function(M,U){return Object.prototype.hasOwnProperty.call(M,U)},I.p="/dist/",I(I.s="./index.js")}({"./index.js":function(V,ae,I){var M=I("./src/cos.js");V.exports=M},"./lib/base64.js":function(V,ae){var I=function(M){M=M||{};var U=M.Base64,s="2.1.9",L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=function(o){for(var c={},p=0,b=o.length;p<b;p++)c[o.charAt(p)]=p;return c}(L),_=String.fromCharCode,C=function(c){if(c.length<2){var p=c.charCodeAt(0);return p<128?c:p<2048?_(192|p>>>6)+_(128|p&63):_(224|p>>>12&15)+_(128|p>>>6&63)+_(128|p&63)}else{var p=65536+(c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320);return _(240|p>>>18&7)+_(128|p>>>12&63)+_(128|p>>>6&63)+_(128|p&63)}},d=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,T=function(c){return c.replace(d,C)},h=function(c){var p=[0,2,1][c.length%3],b=c.charCodeAt(0)<<16|(c.length>1?c.charCodeAt(1):0)<<8|(c.length>2?c.charCodeAt(2):0),R=[L.charAt(b>>>18),L.charAt(b>>>12&63),p>=2?"=":L.charAt(b>>>6&63),p>=1?"=":L.charAt(b&63)];return R.join("")},k=M.btoa?function(o){return M.btoa(o)}:function(o){return o.replace(/[\s\S]{1,3}/g,h)},A=function(o){return k(T(o))},B=function(c,p){return p?A(String(c)).replace(/[+\/]/g,function(b){return b=="+"?"-":"_"}).replace(/=/g,""):A(String(c))},w=function(c){return B(c,!0)},N=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),H=function(c){switch(c.length){case 4:var p=(7&c.charCodeAt(0))<<18|(63&c.charCodeAt(1))<<12|(63&c.charCodeAt(2))<<6|63&c.charCodeAt(3),b=p-65536;return _((b>>>10)+55296)+_((b&1023)+56320);case 3:return _((15&c.charCodeAt(0))<<12|(63&c.charCodeAt(1))<<6|63&c.charCodeAt(2));default:return _((31&c.charCodeAt(0))<<6|63&c.charCodeAt(1))}},D=function(c){return c.replace(N,H)},f=function(c){var p=c.length,b=p%4,R=(p>0?P[c.charAt(0)]<<18:0)|(p>1?P[c.charAt(1)]<<12:0)|(p>2?P[c.charAt(2)]<<6:0)|(p>3?P[c.charAt(3)]:0),j=[_(R>>>16),_(R>>>8&255),_(R&255)];return j.length-=[0,0,2,1][b],j.join("")},l=M.atob?function(o){return M.atob(o)}:function(o){return o.replace(/[\s\S]{1,4}/g,f)},S=function(o){return D(l(o))},i=function(c){return S(String(c).replace(/[-_]/g,function(p){return p=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},t=function(){var c=M.Base64;return M.Base64=U,c},n={VERSION:s,atob:l,btoa:k,fromBase64:i,toBase64:B,utob:T,encode:B,encodeURI:w,btou:D,decode:i,noConflict:t};return n}();V.exports=I},"./lib/crypto.js":function(V,ae,I){(function(M){var U=I("./node_modules/@babel/runtime/helpers/typeof.js"),s=s||function(L,P){var _={},C=_.lib={},d=function(){},T=C.Base={extend:function(f){d.prototype=this;var l=new d;return f&&l.mixIn(f),l.hasOwnProperty("init")||(l.init=function(){l.$super.init.apply(this,arguments)}),l.init.prototype=l,l.$super=this,l},create:function(){var f=this.extend();return f.init.apply(f,arguments),f},init:function(){},mixIn:function(f){for(var l in f)f.hasOwnProperty(l)&&(this[l]=f[l]);f.hasOwnProperty("toString")&&(this.toString=f.toString)},clone:function(){return this.init.prototype.extend(this)}},h=C.WordArray=T.extend({init:function(f,l){f=this.words=f||[],this.sigBytes=l!=P?l:4*f.length},toString:function(f){return(f||A).stringify(this)},concat:function(f){var l=this.words,S=f.words,i=this.sigBytes;if(f=f.sigBytes,this.clamp(),i%4)for(var t=0;t<f;t++)l[i+t>>>2]|=(S[t>>>2]>>>24-8*(t%4)&255)<<24-8*((i+t)%4);else if(65535<S.length)for(t=0;t<f;t+=4)l[i+t>>>2]=S[t>>>2];else l.push.apply(l,S);return this.sigBytes+=f,this},clamp:function(){var f=this.words,l=this.sigBytes;f[l>>>2]&=4294967295<<32-8*(l%4),f.length=L.ceil(l/4)},clone:function(){var f=T.clone.call(this);return f.words=this.words.slice(0),f},random:function(f){for(var l=[],S=0;S<f;S+=4)l.push(4294967296*L.random()|0);return new h.init(l,f)}}),k=_.enc={},A=k.Hex={stringify:function(f){var l=f.words;f=f.sigBytes;for(var S=[],i=0;i<f;i++){var t=l[i>>>2]>>>24-8*(i%4)&255;S.push((t>>>4).toString(16)),S.push((t&15).toString(16))}return S.join("")},parse:function(f){for(var l=f.length,S=[],i=0;i<l;i+=2)S[i>>>3]|=parseInt(f.substr(i,2),16)<<24-4*(i%8);return new h.init(S,l/2)}},B=k.Latin1={stringify:function(f){var l=f.words;f=f.sigBytes;for(var S=[],i=0;i<f;i++)S.push(String.fromCharCode(l[i>>>2]>>>24-8*(i%4)&255));return S.join("")},parse:function(f){for(var l=f.length,S=[],i=0;i<l;i++)S[i>>>2]|=(f.charCodeAt(i)&255)<<24-8*(i%4);return new h.init(S,l)}},w=k.Utf8={stringify:function(f){try{return decodeURIComponent(escape(B.stringify(f)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(f){return B.parse(unescape(encodeURIComponent(f)))}},N=C.BufferedBlockAlgorithm=T.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(f){typeof f=="string"&&(f=w.parse(f)),this._data.concat(f),this._nDataBytes+=f.sigBytes},_process:function(f){var l=this._data,S=l.words,i=l.sigBytes,t=this.blockSize,n=i/(4*t),n=f?L.ceil(n):L.max((n|0)-this._minBufferSize,0);if(f=n*t,i=L.min(4*f,i),f){for(var o=0;o<f;o+=t)this._doProcessBlock(S,o);o=S.splice(0,f),l.sigBytes-=i}return new h.init(o,i)},clone:function(){var f=T.clone.call(this);return f._data=this._data.clone(),f},_minBufferSize:0});C.Hasher=N.extend({cfg:T.extend(),init:function(f){this.cfg=this.cfg.extend(f),this.reset()},reset:function(){N.reset.call(this),this._doReset()},update:function(f){return this._append(f),this._process(),this},finalize:function(f){return f&&this._append(f),this._doFinalize()},blockSize:16,_createHelper:function(f){return function(l,S){return new f.init(S).finalize(l)}},_createHmacHelper:function(f){return function(l,S){return new H.HMAC.init(f,S).finalize(l)}}});var H=_.algo={};return _}(Math);(function(){var L=s,d=L.lib,P=d.WordArray,_=d.Hasher,C=[],d=L.algo.SHA1=_.extend({_doReset:function(){this._hash=new P.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(h,k){for(var A=this._hash.words,B=A[0],w=A[1],N=A[2],H=A[3],D=A[4],f=0;80>f;f++){if(16>f)C[f]=h[k+f]|0;else{var l=C[f-3]^C[f-8]^C[f-14]^C[f-16];C[f]=l<<1|l>>>31}l=(B<<5|B>>>27)+D+C[f],l=20>f?l+((w&N|~w&H)+1518500249):40>f?l+((w^N^H)+1859775393):60>f?l+((w&N|w&H|N&H)-1894007588):l+((w^N^H)-899497514),D=H,H=N,N=w<<30|w>>>2,w=B,B=l}A[0]=A[0]+B|0,A[1]=A[1]+w|0,A[2]=A[2]+N|0,A[3]=A[3]+H|0,A[4]=A[4]+D|0},_doFinalize:function(){var h=this._data,k=h.words,A=8*this._nDataBytes,B=8*h.sigBytes;return k[B>>>5]|=128<<24-B%32,k[(B+64>>>9<<4)+14]=Math.floor(A/4294967296),k[(B+64>>>9<<4)+15]=A,h.sigBytes=4*k.length,this._process(),this._hash},clone:function(){var h=_.clone.call(this);return h._hash=this._hash.clone(),h}});L.SHA1=_._createHelper(d),L.HmacSHA1=_._createHmacHelper(d)})(),function(){var L=s,P=L.enc.Utf8;L.algo.HMAC=L.lib.Base.extend({init:function(C,d){C=this._hasher=new C.init,typeof d=="string"&&(d=P.parse(d));var T=C.blockSize,h=4*T;d.sigBytes>h&&(d=C.finalize(d)),d.clamp();for(var k=this._oKey=d.clone(),A=this._iKey=d.clone(),B=k.words,w=A.words,N=0;N<T;N++)B[N]^=1549556828,w[N]^=909522486;k.sigBytes=A.sigBytes=h,this.reset()},reset:function(){var C=this._hasher;C.reset(),C.update(this._iKey)},update:function(C){return this._hasher.update(C),this},finalize:function(C){var d=this._hasher;return C=d.finalize(C),d.reset(),d.finalize(this._oKey.clone().concat(C))}})}(),function(){var L=s,P=L.lib,_=P.WordArray,C=L.enc;C.Base64={stringify:function(T){var h=T.words,k=T.sigBytes,A=this._map;T.clamp();for(var B=[],w=0;w<k;w+=3)for(var N=h[w>>>2]>>>24-w%4*8&255,H=h[w+1>>>2]>>>24-(w+1)%4*8&255,D=h[w+2>>>2]>>>24-(w+2)%4*8&255,f=N<<16|H<<8|D,l=0;l<4&&w+l*.75<k;l++)B.push(A.charAt(f>>>6*(3-l)&63));var S=A.charAt(64);if(S)for(;B.length%4;)B.push(S);return B.join("")},parse:function(T){var h=T.length,k=this._map,A=k.charAt(64);if(A){var B=T.indexOf(A);B!=-1&&(h=B)}for(var w=[],N=0,H=0;H<h;H++)if(H%4){var D=k.indexOf(T.charAt(H-1))<<H%4*2,f=k.indexOf(T.charAt(H))>>>6-H%4*2;w[N>>>2]|=(D|f)<<24-N%4*8,N++}return _.create(w,N)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),U(M)==="object"?M.exports=s:window.CryptoJS=s}).call(this,I("./node_modules/webpack/buildin/module.js")(V))},"./lib/md5.js":function(V,ae,I){(function(M){var U,s=I("./node_modules/@babel/runtime/helpers/typeof.js");(function(){var L=(typeof window>"u"?"undefined":s(window))==="object",P=L?window:{};P.JS_MD5_NO_WINDOW&&(L=!1);var _=!L&&(typeof self>"u"?"undefined":s(self))==="object";_&&(P=self);var C=!P.JS_MD5_NO_COMMON_JS&&s(M)==="object"&&M.exports,d=I("./node_modules/webpack/buildin/amd-options.js"),T=!P.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",h="0123456789abcdef".split(""),k=[128,32768,8388608,-2147483648],A=[0,8,16,24],B=["hex","array","digest","buffer","arrayBuffer","base64"],w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),N=[],H;if(T){var D=new ArrayBuffer(68);H=new Uint8Array(D),N=new Uint32Array(D)}(P.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}),T&&(P.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(t){return s(t)==="object"&&t.buffer&&t.buffer.constructor===ArrayBuffer});var f=function(n){return function(o,c){return new S(!0).update(o,c)[n]()}},l=function(){var n=f("hex");n.getCtx=n.create=function(){return new S},n.update=function(p){return n.create().update(p)};for(var o=0;o<B.length;++o){var c=B[o];n[c]=f(c)}return n};function S(t){if(t)N[0]=N[16]=N[1]=N[2]=N[3]=N[4]=N[5]=N[6]=N[7]=N[8]=N[9]=N[10]=N[11]=N[12]=N[13]=N[14]=N[15]=0,this.blocks=N,this.buffer8=H;else if(T){var n=new ArrayBuffer(68);this.buffer8=new Uint8Array(n),this.blocks=new Uint32Array(n)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}S.prototype.update=function(t,n){if(!this.finalized){for(var o,c=0,p,b=t.length,R=this.blocks,j=this.buffer8;c<b;){if(this.hashed&&(this.hashed=!1,R[0]=R[16],R[16]=R[1]=R[2]=R[3]=R[4]=R[5]=R[6]=R[7]=R[8]=R[9]=R[10]=R[11]=R[12]=R[13]=R[14]=R[15]=0),T)for(p=this.start;c<b&&p<64;++c)o=t.charCodeAt(c),n||o<128?j[p++]=o:o<2048?(j[p++]=192|o>>6,j[p++]=128|o&63):o<55296||o>=57344?(j[p++]=224|o>>12,j[p++]=128|o>>6&63,j[p++]=128|o&63):(o=65536+((o&1023)<<10|t.charCodeAt(++c)&1023),j[p++]=240|o>>18,j[p++]=128|o>>12&63,j[p++]=128|o>>6&63,j[p++]=128|o&63);else for(p=this.start;c<b&&p<64;++c)o=t.charCodeAt(c),n||o<128?R[p>>2]|=o<<A[p++&3]:o<2048?(R[p>>2]|=(192|o>>6)<<A[p++&3],R[p>>2]|=(128|o&63)<<A[p++&3]):o<55296||o>=57344?(R[p>>2]|=(224|o>>12)<<A[p++&3],R[p>>2]|=(128|o>>6&63)<<A[p++&3],R[p>>2]|=(128|o&63)<<A[p++&3]):(o=65536+((o&1023)<<10|t.charCodeAt(++c)&1023),R[p>>2]|=(240|o>>18)<<A[p++&3],R[p>>2]|=(128|o>>12&63)<<A[p++&3],R[p>>2]|=(128|o>>6&63)<<A[p++&3],R[p>>2]|=(128|o&63)<<A[p++&3]);this.lastByteIndex=p,this.bytes+=p-this.start,p>=64?(this.start=p-64,this.hash(),this.hashed=!0):this.start=p}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},S.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,n=this.lastByteIndex;t[n>>2]|=k[n&3],n>=56&&(this.hashed||this.hash(),t[0]=t[16],t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.bytes<<3,t[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},S.prototype.hash=function(){var t,n,o,c,p,b,R=this.blocks;this.first?(t=R[0]-680876937,t=(t<<7|t>>>25)-271733879<<0,c=(-1732584194^t&2004318071)+R[1]-117830708,c=(c<<12|c>>>20)+t<<0,o=(-271733879^c&(t^-271733879))+R[2]-1126478375,o=(o<<17|o>>>15)+c<<0,n=(t^o&(c^t))+R[3]-1316259209,n=(n<<22|n>>>10)+o<<0):(t=this.h0,n=this.h1,o=this.h2,c=this.h3,t+=(c^n&(o^c))+R[0]-680876936,t=(t<<7|t>>>25)+n<<0,c+=(o^t&(n^o))+R[1]-389564586,c=(c<<12|c>>>20)+t<<0,o+=(n^c&(t^n))+R[2]+606105819,o=(o<<17|o>>>15)+c<<0,n+=(t^o&(c^t))+R[3]-1044525330,n=(n<<22|n>>>10)+o<<0),t+=(c^n&(o^c))+R[4]-176418897,t=(t<<7|t>>>25)+n<<0,c+=(o^t&(n^o))+R[5]+1200080426,c=(c<<12|c>>>20)+t<<0,o+=(n^c&(t^n))+R[6]-1473231341,o=(o<<17|o>>>15)+c<<0,n+=(t^o&(c^t))+R[7]-45705983,n=(n<<22|n>>>10)+o<<0,t+=(c^n&(o^c))+R[8]+1770035416,t=(t<<7|t>>>25)+n<<0,c+=(o^t&(n^o))+R[9]-1958414417,c=(c<<12|c>>>20)+t<<0,o+=(n^c&(t^n))+R[10]-42063,o=(o<<17|o>>>15)+c<<0,n+=(t^o&(c^t))+R[11]-1990404162,n=(n<<22|n>>>10)+o<<0,t+=(c^n&(o^c))+R[12]+1804603682,t=(t<<7|t>>>25)+n<<0,c+=(o^t&(n^o))+R[13]-40341101,c=(c<<12|c>>>20)+t<<0,o+=(n^c&(t^n))+R[14]-1502002290,o=(o<<17|o>>>15)+c<<0,n+=(t^o&(c^t))+R[15]+1236535329,n=(n<<22|n>>>10)+o<<0,t+=(o^c&(n^o))+R[1]-165796510,t=(t<<5|t>>>27)+n<<0,c+=(n^o&(t^n))+R[6]-1069501632,c=(c<<9|c>>>23)+t<<0,o+=(t^n&(c^t))+R[11]+643717713,o=(o<<14|o>>>18)+c<<0,n+=(c^t&(o^c))+R[0]-373897302,n=(n<<20|n>>>12)+o<<0,t+=(o^c&(n^o))+R[5]-701558691,t=(t<<5|t>>>27)+n<<0,c+=(n^o&(t^n))+R[10]+38016083,c=(c<<9|c>>>23)+t<<0,o+=(t^n&(c^t))+R[15]-660478335,o=(o<<14|o>>>18)+c<<0,n+=(c^t&(o^c))+R[4]-405537848,n=(n<<20|n>>>12)+o<<0,t+=(o^c&(n^o))+R[9]+568446438,t=(t<<5|t>>>27)+n<<0,c+=(n^o&(t^n))+R[14]-1019803690,c=(c<<9|c>>>23)+t<<0,o+=(t^n&(c^t))+R[3]-187363961,o=(o<<14|o>>>18)+c<<0,n+=(c^t&(o^c))+R[8]+1163531501,n=(n<<20|n>>>12)+o<<0,t+=(o^c&(n^o))+R[13]-1444681467,t=(t<<5|t>>>27)+n<<0,c+=(n^o&(t^n))+R[2]-51403784,c=(c<<9|c>>>23)+t<<0,o+=(t^n&(c^t))+R[7]+1735328473,o=(o<<14|o>>>18)+c<<0,n+=(c^t&(o^c))+R[12]-1926607734,n=(n<<20|n>>>12)+o<<0,p=n^o,t+=(p^c)+R[5]-378558,t=(t<<4|t>>>28)+n<<0,c+=(p^t)+R[8]-2022574463,c=(c<<11|c>>>21)+t<<0,b=c^t,o+=(b^n)+R[11]+1839030562,o=(o<<16|o>>>16)+c<<0,n+=(b^o)+R[14]-35309556,n=(n<<23|n>>>9)+o<<0,p=n^o,t+=(p^c)+R[1]-1530992060,t=(t<<4|t>>>28)+n<<0,c+=(p^t)+R[4]+1272893353,c=(c<<11|c>>>21)+t<<0,b=c^t,o+=(b^n)+R[7]-155497632,o=(o<<16|o>>>16)+c<<0,n+=(b^o)+R[10]-1094730640,n=(n<<23|n>>>9)+o<<0,p=n^o,t+=(p^c)+R[13]+681279174,t=(t<<4|t>>>28)+n<<0,c+=(p^t)+R[0]-358537222,c=(c<<11|c>>>21)+t<<0,b=c^t,o+=(b^n)+R[3]-722521979,o=(o<<16|o>>>16)+c<<0,n+=(b^o)+R[6]+76029189,n=(n<<23|n>>>9)+o<<0,p=n^o,t+=(p^c)+R[9]-640364487,t=(t<<4|t>>>28)+n<<0,c+=(p^t)+R[12]-421815835,c=(c<<11|c>>>21)+t<<0,b=c^t,o+=(b^n)+R[15]+530742520,o=(o<<16|o>>>16)+c<<0,n+=(b^o)+R[2]-995338651,n=(n<<23|n>>>9)+o<<0,t+=(o^(n|~c))+R[0]-198630844,t=(t<<6|t>>>26)+n<<0,c+=(n^(t|~o))+R[7]+1126891415,c=(c<<10|c>>>22)+t<<0,o+=(t^(c|~n))+R[14]-1416354905,o=(o<<15|o>>>17)+c<<0,n+=(c^(o|~t))+R[5]-57434055,n=(n<<21|n>>>11)+o<<0,t+=(o^(n|~c))+R[12]+1700485571,t=(t<<6|t>>>26)+n<<0,c+=(n^(t|~o))+R[3]-1894986606,c=(c<<10|c>>>22)+t<<0,o+=(t^(c|~n))+R[10]-1051523,o=(o<<15|o>>>17)+c<<0,n+=(c^(o|~t))+R[1]-2054922799,n=(n<<21|n>>>11)+o<<0,t+=(o^(n|~c))+R[8]+1873313359,t=(t<<6|t>>>26)+n<<0,c+=(n^(t|~o))+R[15]-30611744,c=(c<<10|c>>>22)+t<<0,o+=(t^(c|~n))+R[6]-1560198380,o=(o<<15|o>>>17)+c<<0,n+=(c^(o|~t))+R[13]+1309151649,n=(n<<21|n>>>11)+o<<0,t+=(o^(n|~c))+R[4]-145523070,t=(t<<6|t>>>26)+n<<0,c+=(n^(t|~o))+R[11]-1120210379,c=(c<<10|c>>>22)+t<<0,o+=(t^(c|~n))+R[2]+718787259,o=(o<<15|o>>>17)+c<<0,n+=(c^(o|~t))+R[9]-343485551,n=(n<<21|n>>>11)+o<<0,this.first?(this.h0=t+1732584193<<0,this.h1=n-271733879<<0,this.h2=o-1732584194<<0,this.h3=c+271733878<<0,this.first=!1):(this.h0=this.h0+t<<0,this.h1=this.h1+n<<0,this.h2=this.h2+o<<0,this.h3=this.h3+c<<0)},S.prototype.hex=function(){this.finalize();var t=this.h0,n=this.h1,o=this.h2,c=this.h3;return h[t>>4&15]+h[t&15]+h[t>>12&15]+h[t>>8&15]+h[t>>20&15]+h[t>>16&15]+h[t>>28&15]+h[t>>24&15]+h[n>>4&15]+h[n&15]+h[n>>12&15]+h[n>>8&15]+h[n>>20&15]+h[n>>16&15]+h[n>>28&15]+h[n>>24&15]+h[o>>4&15]+h[o&15]+h[o>>12&15]+h[o>>8&15]+h[o>>20&15]+h[o>>16&15]+h[o>>28&15]+h[o>>24&15]+h[c>>4&15]+h[c&15]+h[c>>12&15]+h[c>>8&15]+h[c>>20&15]+h[c>>16&15]+h[c>>28&15]+h[c>>24&15]},S.prototype.toString=S.prototype.hex,S.prototype.digest=function(t){if(t==="hex")return this.hex();this.finalize();var n=this.h0,o=this.h1,c=this.h2,p=this.h3,b=[n&255,n>>8&255,n>>16&255,n>>24&255,o&255,o>>8&255,o>>16&255,o>>24&255,c&255,c>>8&255,c>>16&255,c>>24&255,p&255,p>>8&255,p>>16&255,p>>24&255];return b},S.prototype.array=S.prototype.digest,S.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(16),n=new Uint32Array(t);return n[0]=this.h0,n[1]=this.h1,n[2]=this.h2,n[3]=this.h3,t},S.prototype.buffer=S.prototype.arrayBuffer,S.prototype.base64=function(){for(var t,n,o,c="",p=this.array(),b=0;b<15;)t=p[b++],n=p[b++],o=p[b++],c+=w[t>>>2]+w[(t<<4|n>>>4)&63]+w[(n<<2|o>>>6)&63]+w[o&63];return t=p[b],c+=w[t>>>2]+w[t<<4&63]+"==",c};var i=l();C?M.exports=i:(P.md5=i,d&&(U=(function(){return i}).call(i,I,i,M),U!==void 0&&(M.exports=U)))})()}).call(this,I("./node_modules/webpack/buildin/module.js")(V))},"./lib/request.js":function(V,ae,I){var M=I("./node_modules/@babel/runtime/helpers/typeof.js"),U=function(d){switch(M(d)){case"string":return d;case"boolean":return d?"true":"false";case"number":return isFinite(d)?d:"";default:return""}},s=function(d,T,h,k){return T=T||"&",h=h||"=",d===null&&(d=void 0),M(d)==="object"?Object.keys(d).map(function(A){var B=encodeURIComponent(U(A))+h;return Array.isArray(d[A])?d[A].map(function(w){return B+encodeURIComponent(U(w))}).join(T):B+encodeURIComponent(U(d[A]))}).filter(Boolean).join(T):""},L=function(d,T,h){var k={},A=T.getAllResponseHeaders();return A&&A.length>0&&A.trim().split(`
`).forEach(function(B){if(B){var w=B.indexOf(":"),N=B.substr(0,w).trim().toLowerCase(),H=B.substr(w+1).trim();k[N]=H}}),{error:d,statusCode:T.status,statusMessage:T.statusText,headers:k,body:h}},P=function(d,T){return!T&&T==="text"?d.responseText:d.response},_=function(d,T){var h=(d.method||"GET").toUpperCase(),k=d.url;if(d.qs){var A=s(d.qs);A&&(k+=(k.indexOf("?")===-1?"?":"&")+A)}var B=new XMLHttpRequest;if(B.open(h,k,!0),B.responseType=d.dataType||"text",d.xhrFields)for(var w in d.xhrFields)B[w]=d.xhrFields[w];var N=d.headers;if(N)for(var H in N)N.hasOwnProperty(H)&&H.toLowerCase()!=="content-length"&&H.toLowerCase()!=="user-agent"&&H.toLowerCase()!=="origin"&&H.toLowerCase()!=="host"&&B.setRequestHeader(H,N[H]);return d.onProgress&&B.upload&&(B.upload.onprogress=d.onProgress),d.onDownloadProgress&&(B.onprogress=d.onDownloadProgress),d.timeout&&(B.timeout=d.timeout),B.ontimeout=function(D){var f=new Error("timeout");T(L(f,B))},B.onload=function(){T(L(null,B,P(B,d.dataType)))},B.onerror=function(D){var f=P(B,d.dataType);if(f)T(L(null,B,f));else{var l=B.statusText;!l&&B.status===0&&(l=new Error("CORS blocked or network error")),T(L(l,B,f))}},B.send(d.body||""),B};V.exports=_},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(V,ae){function I(M,U){if(!(M instanceof U))throw new TypeError("Cannot call a class as a function")}V.exports=I,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(V,ae,I){var M=I("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function U(L,P){for(var _=0;_<P.length;_++){var C=P[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(L,M(C.key),C)}}function s(L,P,_){return P&&U(L.prototype,P),_&&U(L,_),Object.defineProperty(L,"prototype",{writable:!1}),L}V.exports=s,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":function(V,ae,I){var M=I("./node_modules/@babel/runtime/helpers/typeof.js").default;function U(s,L){if(M(s)!=="object"||s===null)return s;var P=s[Symbol.toPrimitive];if(P!==void 0){var _=P.call(s,L||"default");if(M(_)!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(s)}V.exports=U,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":function(V,ae,I){var M=I("./node_modules/@babel/runtime/helpers/typeof.js").default,U=I("./node_modules/@babel/runtime/helpers/toPrimitive.js");function s(L){var P=U(L,"string");return M(P)==="symbol"?P:String(P)}V.exports=s,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(V,ae){function I(M){"@babel/helpers - typeof";return V.exports=I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},V.exports.__esModule=!0,V.exports.default=V.exports,I(M)}V.exports=I,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/fast-xml-parser/src/fxp.js":function(V,ae,I){const M=I("./node_modules/fast-xml-parser/src/validator.js"),U=I("./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js"),s=I("./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js");V.exports={XMLParser:U,XMLValidator:M,XMLBuilder:s}},"./node_modules/fast-xml-parser/src/ignoreAttributes.js":function(V,ae){function I(M){return typeof M=="function"?M:Array.isArray(M)?U=>{for(const s of M)if(typeof s=="string"&&U===s||s instanceof RegExp&&s.test(U))return!0}:()=>!1}V.exports=I},"./node_modules/fast-xml-parser/src/util.js":function(V,ae,I){const M=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",U=M+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",s="["+M+"]["+U+"]*",L=new RegExp("^"+s+"$"),P=function(C,d){const T=[];let h=d.exec(C);for(;h;){const k=[];k.startIndex=d.lastIndex-h[0].length;const A=h.length;for(let B=0;B<A;B++)k.push(h[B]);T.push(k),h=d.exec(C)}return T},_=function(C){const d=L.exec(C);return!(d===null||typeof d>"u")};ae.isExist=function(C){return typeof C<"u"},ae.isEmptyObject=function(C){return Object.keys(C).length===0},ae.merge=function(C,d,T){if(d){const h=Object.keys(d),k=h.length;for(let A=0;A<k;A++)T==="strict"?C[h[A]]=[d[h[A]]]:C[h[A]]=d[h[A]]}},ae.getValue=function(C){return ae.isExist(C)?C:""},ae.isName=_,ae.getAllMatches=P,ae.nameRegexp=s},"./node_modules/fast-xml-parser/src/validator.js":function(V,ae,I){const M=I("./node_modules/fast-xml-parser/src/util.js"),U={allowBooleanAttributes:!1,unpairedTags:[]};ae.validate=function(f,l){l=Object.assign({},U,l);const S=[];let i=!1,t=!1;f[0]==="\uFEFF"&&(f=f.substr(1));for(let n=0;n<f.length;n++)if(f[n]==="<"&&f[n+1]==="?"){if(n+=2,n=L(f,n),n.err)return n}else if(f[n]==="<"){let o=n;if(n++,f[n]==="!"){n=P(f,n);continue}else{let c=!1;f[n]==="/"&&(c=!0,n++);let p="";for(;n<f.length&&f[n]!==">"&&f[n]!==" "&&f[n]!=="	"&&f[n]!==`
`&&f[n]!=="\r";n++)p+=f[n];if(p=p.trim(),p[p.length-1]==="/"&&(p=p.substring(0,p.length-1),n--),!N(p)){let j;return p.trim().length===0?j="Invalid space after '<'.":j="Tag '"+p+"' is an invalid name.",B("InvalidTag",j,H(f,n))}const b=d(f,n);if(b===!1)return B("InvalidAttr","Attributes for '"+p+"' have open quote.",H(f,n));let R=b.value;if(n=b.index,R[R.length-1]==="/"){const j=n-R.length;R=R.substring(0,R.length-1);const F=h(R,l);if(F===!0)i=!0;else return B(F.err.code,F.err.msg,H(f,j+F.err.line))}else if(c)if(b.tagClosed){if(R.trim().length>0)return B("InvalidTag","Closing tag '"+p+"' can't have attributes or invalid starting.",H(f,o));if(S.length===0)return B("InvalidTag","Closing tag '"+p+"' has not been opened.",H(f,o));{const j=S.pop();if(p!==j.tagName){let F=H(f,j.tagStartPos);return B("InvalidTag","Expected closing tag '"+j.tagName+"' (opened in line "+F.line+", col "+F.col+") instead of closing tag '"+p+"'.",H(f,o))}S.length==0&&(t=!0)}}else return B("InvalidTag","Closing tag '"+p+"' doesn't have proper closing.",H(f,n));else{const j=h(R,l);if(j!==!0)return B(j.err.code,j.err.msg,H(f,n-R.length+j.err.line));if(t===!0)return B("InvalidXml","Multiple possible root nodes found.",H(f,n));l.unpairedTags.indexOf(p)!==-1||S.push({tagName:p,tagStartPos:o}),i=!0}for(n++;n<f.length;n++)if(f[n]==="<")if(f[n+1]==="!"){n++,n=P(f,n);continue}else if(f[n+1]==="?"){if(n=L(f,++n),n.err)return n}else break;else if(f[n]==="&"){const j=A(f,n);if(j==-1)return B("InvalidChar","char '&' is not expected.",H(f,n));n=j}else if(t===!0&&!s(f[n]))return B("InvalidXml","Extra text at the end",H(f,n));f[n]==="<"&&n--}}else{if(s(f[n]))continue;return B("InvalidChar","char '"+f[n]+"' is not expected.",H(f,n))}if(i){if(S.length==1)return B("InvalidTag","Unclosed tag '"+S[0].tagName+"'.",H(f,S[0].tagStartPos));if(S.length>0)return B("InvalidXml","Invalid '"+JSON.stringify(S.map(n=>n.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return B("InvalidXml","Start tag expected.",1);return!0};function s(f){return f===" "||f==="	"||f===`
`||f==="\r"}function L(f,l){const S=l;for(;l<f.length;l++)if(f[l]=="?"||f[l]==" "){const i=f.substr(S,l-S);if(l>5&&i==="xml")return B("InvalidXml","XML declaration allowed only at the start of the document.",H(f,l));if(f[l]=="?"&&f[l+1]==">"){l++;break}else continue}return l}function P(f,l){if(f.length>l+5&&f[l+1]==="-"&&f[l+2]==="-"){for(l+=3;l<f.length;l++)if(f[l]==="-"&&f[l+1]==="-"&&f[l+2]===">"){l+=2;break}}else if(f.length>l+8&&f[l+1]==="D"&&f[l+2]==="O"&&f[l+3]==="C"&&f[l+4]==="T"&&f[l+5]==="Y"&&f[l+6]==="P"&&f[l+7]==="E"){let S=1;for(l+=8;l<f.length;l++)if(f[l]==="<")S++;else if(f[l]===">"&&(S--,S===0))break}else if(f.length>l+9&&f[l+1]==="["&&f[l+2]==="C"&&f[l+3]==="D"&&f[l+4]==="A"&&f[l+5]==="T"&&f[l+6]==="A"&&f[l+7]==="["){for(l+=8;l<f.length;l++)if(f[l]==="]"&&f[l+1]==="]"&&f[l+2]===">"){l+=2;break}}return l}const _='"',C="'";function d(f,l){let S="",i="",t=!1;for(;l<f.length;l++){if(f[l]===_||f[l]===C)i===""?i=f[l]:i!==f[l]||(i="");else if(f[l]===">"&&i===""){t=!0;break}S+=f[l]}return i!==""?!1:{value:S,index:l,tagClosed:t}}const T=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function h(f,l){const S=M.getAllMatches(f,T),i={};for(let t=0;t<S.length;t++){if(S[t][1].length===0)return B("InvalidAttr","Attribute '"+S[t][2]+"' has no space in starting.",D(S[t]));if(S[t][3]!==void 0&&S[t][4]===void 0)return B("InvalidAttr","Attribute '"+S[t][2]+"' is without value.",D(S[t]));if(S[t][3]===void 0&&!l.allowBooleanAttributes)return B("InvalidAttr","boolean attribute '"+S[t][2]+"' is not allowed.",D(S[t]));const n=S[t][2];if(!w(n))return B("InvalidAttr","Attribute '"+n+"' is an invalid name.",D(S[t]));if(!i.hasOwnProperty(n))i[n]=1;else return B("InvalidAttr","Attribute '"+n+"' is repeated.",D(S[t]))}return!0}function k(f,l){let S=/\d/;for(f[l]==="x"&&(l++,S=/[\da-fA-F]/);l<f.length;l++){if(f[l]===";")return l;if(!f[l].match(S))break}return-1}function A(f,l){if(l++,f[l]===";")return-1;if(f[l]==="#")return l++,k(f,l);let S=0;for(;l<f.length;l++,S++)if(!(f[l].match(/\w/)&&S<20)){if(f[l]===";")break;return-1}return l}function B(f,l,S){return{err:{code:f,msg:l,line:S.line||S,col:S.col}}}function w(f){return M.isName(f)}function N(f){return M.isName(f)}function H(f,l){const S=f.substring(0,l).split(/\r?\n/);return{line:S.length,col:S[S.length-1].length+1}}function D(f){return f.startIndex+f[1].length}},"./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js":function(V,ae,I){const M=I("./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js"),U=I("./node_modules/fast-xml-parser/src/ignoreAttributes.js"),s={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(d,T){return T},attributeValueProcessor:function(d,T){return T},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function L(d){this.options=Object.assign({},s,d),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=U(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=C),this.processTextOrObjNode=P,this.options.format?(this.indentate=_,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}L.prototype.build=function(d){return this.options.preserveOrder?M(d,this.options):(Array.isArray(d)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(d={[this.options.arrayNodeName]:d}),this.j2x(d,0,[]).val)},L.prototype.j2x=function(d,T,h){let k="",A="";const B=h.join(".");for(let w in d)if(Object.prototype.hasOwnProperty.call(d,w))if(typeof d[w]>"u")this.isAttribute(w)&&(A+="");else if(d[w]===null)this.isAttribute(w)?A+="":w[0]==="?"?A+=this.indentate(T)+"<"+w+"?"+this.tagEndChar:A+=this.indentate(T)+"<"+w+"/"+this.tagEndChar;else if(d[w]instanceof Date)A+=this.buildTextValNode(d[w],w,"",T);else if(typeof d[w]!="object"){const N=this.isAttribute(w);if(N&&!this.ignoreAttributesFn(N,B))k+=this.buildAttrPairStr(N,""+d[w]);else if(!N)if(w===this.options.textNodeName){let H=this.options.tagValueProcessor(w,""+d[w]);A+=this.replaceEntitiesValue(H)}else A+=this.buildTextValNode(d[w],w,"",T)}else if(Array.isArray(d[w])){const N=d[w].length;let H="",D="";for(let f=0;f<N;f++){const l=d[w][f];if(!(typeof l>"u"))if(l===null)w[0]==="?"?A+=this.indentate(T)+"<"+w+"?"+this.tagEndChar:A+=this.indentate(T)+"<"+w+"/"+this.tagEndChar;else if(typeof l=="object")if(this.options.oneListGroup){const S=this.j2x(l,T+1,h.concat(w));H+=S.val,this.options.attributesGroupName&&l.hasOwnProperty(this.options.attributesGroupName)&&(D+=S.attrStr)}else H+=this.processTextOrObjNode(l,w,T,h);else if(this.options.oneListGroup){let S=this.options.tagValueProcessor(w,l);S=this.replaceEntitiesValue(S),H+=S}else H+=this.buildTextValNode(l,w,"",T)}this.options.oneListGroup&&(H=this.buildObjectNode(H,w,D,T)),A+=H}else if(this.options.attributesGroupName&&w===this.options.attributesGroupName){const N=Object.keys(d[w]),H=N.length;for(let D=0;D<H;D++)k+=this.buildAttrPairStr(N[D],""+d[w][N[D]])}else A+=this.processTextOrObjNode(d[w],w,T,h);return{attrStr:k,val:A}},L.prototype.buildAttrPairStr=function(d,T){return T=this.options.attributeValueProcessor(d,""+T),T=this.replaceEntitiesValue(T),this.options.suppressBooleanAttributes&&T==="true"?" "+d:" "+d+'="'+T+'"'};function P(d,T,h,k){const A=this.j2x(d,h+1,k.concat(T));return d[this.options.textNodeName]!==void 0&&Object.keys(d).length===1?this.buildTextValNode(d[this.options.textNodeName],T,A.attrStr,h):this.buildObjectNode(A.val,T,A.attrStr,h)}L.prototype.buildObjectNode=function(d,T,h,k){if(d==="")return T[0]==="?"?this.indentate(k)+"<"+T+h+"?"+this.tagEndChar:this.indentate(k)+"<"+T+h+this.closeTag(T)+this.tagEndChar;{let A="</"+T+this.tagEndChar,B="";return T[0]==="?"&&(B="?",A=""),(h||h==="")&&d.indexOf("<")===-1?this.indentate(k)+"<"+T+h+B+">"+d+A:this.options.commentPropName!==!1&&T===this.options.commentPropName&&B.length===0?this.indentate(k)+`<!--${d}-->`+this.newLine:this.indentate(k)+"<"+T+h+B+this.tagEndChar+d+this.indentate(k)+A}},L.prototype.closeTag=function(d){let T="";return this.options.unpairedTags.indexOf(d)!==-1?this.options.suppressUnpairedNode||(T="/"):this.options.suppressEmptyNode?T="/":T=`></${d}`,T},L.prototype.buildTextValNode=function(d,T,h,k){if(this.options.cdataPropName!==!1&&T===this.options.cdataPropName)return this.indentate(k)+`<![CDATA[${d}]]>`+this.newLine;if(this.options.commentPropName!==!1&&T===this.options.commentPropName)return this.indentate(k)+`<!--${d}-->`+this.newLine;if(T[0]==="?")return this.indentate(k)+"<"+T+h+"?"+this.tagEndChar;{let A=this.options.tagValueProcessor(T,d);return A=this.replaceEntitiesValue(A),A===""?this.indentate(k)+"<"+T+h+this.closeTag(T)+this.tagEndChar:this.indentate(k)+"<"+T+h+">"+A+"</"+T+this.tagEndChar}},L.prototype.replaceEntitiesValue=function(d){if(d&&d.length>0&&this.options.processEntities)for(let T=0;T<this.options.entities.length;T++){const h=this.options.entities[T];d=d.replace(h.regex,h.val)}return d};function _(d){return this.options.indentBy.repeat(d)}function C(d){return d.startsWith(this.options.attributeNamePrefix)&&d!==this.options.textNodeName?d.substr(this.attrPrefixLen):!1}V.exports=L},"./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js":function(V,ae){const I=`
`;function M(C,d){let T="";return d.format&&d.indentBy.length>0&&(T=I),U(C,d,"",T)}function U(C,d,T,h){let k="",A=!1;for(let B=0;B<C.length;B++){const w=C[B],N=s(w);if(N===void 0)continue;let H="";if(T.length===0?H=N:H=`${T}.${N}`,N===d.textNodeName){let i=w[N];P(H,d)||(i=d.tagValueProcessor(N,i),i=_(i,d)),A&&(k+=h),k+=i,A=!1;continue}else if(N===d.cdataPropName){A&&(k+=h),k+=`<![CDATA[${w[N][0][d.textNodeName]}]]>`,A=!1;continue}else if(N===d.commentPropName){k+=h+`<!--${w[N][0][d.textNodeName]}-->`,A=!0;continue}else if(N[0]==="?"){const i=L(w[":@"],d),t=N==="?xml"?"":h;let n=w[N][0][d.textNodeName];n=n.length!==0?" "+n:"",k+=t+`<${N}${n}${i}?>`,A=!0;continue}let D=h;D!==""&&(D+=d.indentBy);const f=L(w[":@"],d),l=h+`<${N}${f}`,S=U(w[N],d,H,D);d.unpairedTags.indexOf(N)!==-1?d.suppressUnpairedNode?k+=l+">":k+=l+"/>":(!S||S.length===0)&&d.suppressEmptyNode?k+=l+"/>":S&&S.endsWith(">")?k+=l+`>${S}${h}</${N}>`:(k+=l+">",S&&h!==""&&(S.includes("/>")||S.includes("</"))?k+=h+d.indentBy+S+h:k+=S,k+=`</${N}>`),A=!0}return k}function s(C){const d=Object.keys(C);for(let T=0;T<d.length;T++){const h=d[T];if(C.hasOwnProperty(h)&&h!==":@")return h}}function L(C,d){let T="";if(C&&!d.ignoreAttributes)for(let h in C){if(!C.hasOwnProperty(h))continue;let k=d.attributeValueProcessor(h,C[h]);k=_(k,d),k===!0&&d.suppressBooleanAttributes?T+=` ${h.substr(d.attributeNamePrefix.length)}`:T+=` ${h.substr(d.attributeNamePrefix.length)}="${k}"`}return T}function P(C,d){C=C.substr(0,C.length-d.textNodeName.length-1);let T=C.substr(C.lastIndexOf(".")+1);for(let h in d.stopNodes)if(d.stopNodes[h]===C||d.stopNodes[h]==="*."+T)return!0;return!1}function _(C,d){if(C&&C.length>0&&d.processEntities)for(let T=0;T<d.entities.length;T++){const h=d.entities[T];C=C.replace(h.regex,h.val)}return C}V.exports=M},"./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js":function(V,ae,I){const M=I("./node_modules/fast-xml-parser/src/util.js");function U(h,k){const A={};if(h[k+3]==="O"&&h[k+4]==="C"&&h[k+5]==="T"&&h[k+6]==="Y"&&h[k+7]==="P"&&h[k+8]==="E"){k=k+9;let B=1,w=!1,N=!1,H="";for(;k<h.length;k++)if(h[k]==="<"&&!N){if(w&&P(h,k))k+=7,[entityName,val,k]=s(h,k+1),val.indexOf("&")===-1&&(A[T(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(w&&_(h,k))k+=8;else if(w&&C(h,k))k+=8;else if(w&&d(h,k))k+=9;else if(L)N=!0;else throw new Error("Invalid DOCTYPE");B++,H=""}else if(h[k]===">"){if(N?h[k-1]==="-"&&h[k-2]==="-"&&(N=!1,B--):B--,B===0)break}else h[k]==="["?w=!0:H+=h[k];if(B!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:A,i:k}}function s(h,k){let A="";for(;k<h.length&&h[k]!=="'"&&h[k]!=='"';k++)A+=h[k];if(A=A.trim(),A.indexOf(" ")!==-1)throw new Error("External entites are not supported");const B=h[k++];let w="";for(;k<h.length&&h[k]!==B;k++)w+=h[k];return[A,w,k]}function L(h,k){return h[k+1]==="!"&&h[k+2]==="-"&&h[k+3]==="-"}function P(h,k){return h[k+1]==="!"&&h[k+2]==="E"&&h[k+3]==="N"&&h[k+4]==="T"&&h[k+5]==="I"&&h[k+6]==="T"&&h[k+7]==="Y"}function _(h,k){return h[k+1]==="!"&&h[k+2]==="E"&&h[k+3]==="L"&&h[k+4]==="E"&&h[k+5]==="M"&&h[k+6]==="E"&&h[k+7]==="N"&&h[k+8]==="T"}function C(h,k){return h[k+1]==="!"&&h[k+2]==="A"&&h[k+3]==="T"&&h[k+4]==="T"&&h[k+5]==="L"&&h[k+6]==="I"&&h[k+7]==="S"&&h[k+8]==="T"}function d(h,k){return h[k+1]==="!"&&h[k+2]==="N"&&h[k+3]==="O"&&h[k+4]==="T"&&h[k+5]==="A"&&h[k+6]==="T"&&h[k+7]==="I"&&h[k+8]==="O"&&h[k+9]==="N"}function T(h){if(M.isName(h))return h;throw new Error(`Invalid entity name ${h}`)}V.exports=U},"./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js":function(V,ae){const I={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(U,s){return s},attributeValueProcessor:function(U,s){return s},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(U,s,L){return U}},M=function(U){return Object.assign({},I,U)};ae.buildOptions=M,ae.defaultOptions=I},"./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js":function(V,ae,I){const M=I("./node_modules/fast-xml-parser/src/util.js"),U=I("./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js"),s=I("./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js"),L=I("./node_modules/strnum/strnum.js"),P=I("./node_modules/fast-xml-parser/src/ignoreAttributes.js");class _{constructor(n){this.options=n,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(o,c)=>String.fromCharCode(Number.parseInt(c,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(o,c)=>String.fromCharCode(Number.parseInt(c,16))}},this.addExternalEntities=C,this.parseXml=A,this.parseTextData=d,this.resolveNameSpace=T,this.buildAttributesMap=k,this.isItStopNode=H,this.replaceEntitiesValue=w,this.readStopNodeData=S,this.saveTextToParentTag=N,this.addChild=B,this.ignoreAttributesFn=P(this.options.ignoreAttributes)}}function C(t){const n=Object.keys(t);for(let o=0;o<n.length;o++){const c=n[o];this.lastEntities[c]={regex:new RegExp("&"+c+";","g"),val:t[c]}}}function d(t,n,o,c,p,b,R){if(t!==void 0&&(this.options.trimValues&&!c&&(t=t.trim()),t.length>0)){R||(t=this.replaceEntitiesValue(t));const j=this.options.tagValueProcessor(n,t,o,p,b);return j==null?t:typeof j!=typeof t||j!==t?j:this.options.trimValues?i(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?i(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function T(t){if(this.options.removeNSPrefix){const n=t.split(":"),o=t.charAt(0)==="/"?"/":"";if(n[0]==="xmlns")return"";n.length===2&&(t=o+n[1])}return t}const h=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function k(t,n,o){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const c=M.getAllMatches(t,h),p=c.length,b={};for(let R=0;R<p;R++){const j=this.resolveNameSpace(c[R][1]);if(this.ignoreAttributesFn(j,n))continue;let F=c[R][4],J=this.options.attributeNamePrefix+j;if(j.length)if(this.options.transformAttributeName&&(J=this.options.transformAttributeName(J)),J==="__proto__"&&(J="#__proto__"),F!==void 0){this.options.trimValues&&(F=F.trim()),F=this.replaceEntitiesValue(F);const $=this.options.attributeValueProcessor(j,F,n);$==null?b[J]=F:typeof $!=typeof F||$!==F?b[J]=$:b[J]=i(F,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(b[J]=!0)}if(!Object.keys(b).length)return;if(this.options.attributesGroupName){const R={};return R[this.options.attributesGroupName]=b,R}return b}}const A=function(t){t=t.replace(/\r\n?/g,`
`);const n=new U("!xml");let o=n,c="",p="";for(let b=0;b<t.length;b++)if(t[b]==="<")if(t[b+1]==="/"){const j=f(t,">",b,"Closing Tag is not closed.");let F=t.substring(b+2,j).trim();if(this.options.removeNSPrefix){const Y=F.indexOf(":");Y!==-1&&(F=F.substr(Y+1))}this.options.transformTagName&&(F=this.options.transformTagName(F)),o&&(c=this.saveTextToParentTag(c,o,p));const J=p.substring(p.lastIndexOf(".")+1);if(F&&this.options.unpairedTags.indexOf(F)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${F}>`);let $=0;J&&this.options.unpairedTags.indexOf(J)!==-1?($=p.lastIndexOf(".",p.lastIndexOf(".")-1),this.tagsNodeStack.pop()):$=p.lastIndexOf("."),p=p.substring(0,$),o=this.tagsNodeStack.pop(),c="",b=j}else if(t[b+1]==="?"){let j=l(t,b,!1,"?>");if(!j)throw new Error("Pi Tag is not closed.");if(c=this.saveTextToParentTag(c,o,p),!(this.options.ignoreDeclaration&&j.tagName==="?xml"||this.options.ignorePiTags)){const F=new U(j.tagName);F.add(this.options.textNodeName,""),j.tagName!==j.tagExp&&j.attrExpPresent&&(F[":@"]=this.buildAttributesMap(j.tagExp,p,j.tagName)),this.addChild(o,F,p)}b=j.closeIndex+1}else if(t.substr(b+1,3)==="!--"){const j=f(t,"-->",b+4,"Comment is not closed.");if(this.options.commentPropName){const F=t.substring(b+4,j-2);c=this.saveTextToParentTag(c,o,p),o.add(this.options.commentPropName,[{[this.options.textNodeName]:F}])}b=j}else if(t.substr(b+1,2)==="!D"){const j=s(t,b);this.docTypeEntities=j.entities,b=j.i}else if(t.substr(b+1,2)==="!["){const j=f(t,"]]>",b,"CDATA is not closed.")-2,F=t.substring(b+9,j);c=this.saveTextToParentTag(c,o,p);let J=this.parseTextData(F,o.tagname,p,!0,!1,!0,!0);J==null&&(J=""),this.options.cdataPropName?o.add(this.options.cdataPropName,[{[this.options.textNodeName]:F}]):o.add(this.options.textNodeName,J),b=j+2}else{let j=l(t,b,this.options.removeNSPrefix),F=j.tagName;const J=j.rawTagName;let $=j.tagExp,Y=j.attrExpPresent,te=j.closeIndex;this.options.transformTagName&&(F=this.options.transformTagName(F)),o&&c&&o.tagname!=="!xml"&&(c=this.saveTextToParentTag(c,o,p,!1));const he=o;if(he&&this.options.unpairedTags.indexOf(he.tagname)!==-1&&(o=this.tagsNodeStack.pop(),p=p.substring(0,p.lastIndexOf("."))),F!==n.tagname&&(p+=p?"."+F:F),this.isItStopNode(this.options.stopNodes,p,F)){let ue="";if($.length>0&&$.lastIndexOf("/")===$.length-1)F[F.length-1]==="/"?(F=F.substr(0,F.length-1),p=p.substr(0,p.length-1),$=F):$=$.substr(0,$.length-1),b=j.closeIndex;else if(this.options.unpairedTags.indexOf(F)!==-1)b=j.closeIndex;else{const Z=this.readStopNodeData(t,J,te+1);if(!Z)throw new Error(`Unexpected end of ${J}`);b=Z.i,ue=Z.tagContent}const ie=new U(F);F!==$&&Y&&(ie[":@"]=this.buildAttributesMap($,p,F)),ue&&(ue=this.parseTextData(ue,F,p,!0,Y,!0,!0)),p=p.substr(0,p.lastIndexOf(".")),ie.add(this.options.textNodeName,ue),this.addChild(o,ie,p)}else{if($.length>0&&$.lastIndexOf("/")===$.length-1){F[F.length-1]==="/"?(F=F.substr(0,F.length-1),p=p.substr(0,p.length-1),$=F):$=$.substr(0,$.length-1),this.options.transformTagName&&(F=this.options.transformTagName(F));const ue=new U(F);F!==$&&Y&&(ue[":@"]=this.buildAttributesMap($,p,F)),this.addChild(o,ue,p),p=p.substr(0,p.lastIndexOf("."))}else{const ue=new U(F);this.tagsNodeStack.push(o),F!==$&&Y&&(ue[":@"]=this.buildAttributesMap($,p,F)),this.addChild(o,ue,p),o=ue}c="",b=te}}else c+=t[b];return n.child};function B(t,n,o){const c=this.options.updateTag(n.tagname,o,n[":@"]);c===!1||(typeof c=="string"&&(n.tagname=c),t.addChild(n))}const w=function(t){if(this.options.processEntities){for(let n in this.docTypeEntities){const o=this.docTypeEntities[n];t=t.replace(o.regx,o.val)}for(let n in this.lastEntities){const o=this.lastEntities[n];t=t.replace(o.regex,o.val)}if(this.options.htmlEntities)for(let n in this.htmlEntities){const o=this.htmlEntities[n];t=t.replace(o.regex,o.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function N(t,n,o,c){return t&&(c===void 0&&(c=Object.keys(n.child).length===0),t=this.parseTextData(t,n.tagname,o,!1,n[":@"]?Object.keys(n[":@"]).length!==0:!1,c),t!==void 0&&t!==""&&n.add(this.options.textNodeName,t),t=""),t}function H(t,n,o){const c="*."+o;for(const p in t){const b=t[p];if(c===b||n===b)return!0}return!1}function D(t,n,o=">"){let c,p="";for(let b=n;b<t.length;b++){let R=t[b];if(c)R===c&&(c="");else if(R==='"'||R==="'")c=R;else if(R===o[0])if(o[1]){if(t[b+1]===o[1])return{data:p,index:b}}else return{data:p,index:b};else R==="	"&&(R=" ");p+=R}}function f(t,n,o,c){const p=t.indexOf(n,o);if(p===-1)throw new Error(c);return p+n.length-1}function l(t,n,o,c=">"){const p=D(t,n+1,c);if(!p)return;let b=p.data;const R=p.index,j=b.search(/\s/);let F=b,J=!0;j!==-1&&(F=b.substring(0,j),b=b.substring(j+1).trimStart());const $=F;if(o){const Y=F.indexOf(":");Y!==-1&&(F=F.substr(Y+1),J=F!==p.data.substr(Y+1))}return{tagName:F,tagExp:b,closeIndex:R,attrExpPresent:J,rawTagName:$}}function S(t,n,o){const c=o;let p=1;for(;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="/"){const b=f(t,">",o,`${n} is not closed`);if(t.substring(o+2,b).trim()===n&&(p--,p===0))return{tagContent:t.substring(c,o),i:b};o=b}else if(t[o+1]==="?")o=f(t,"?>",o+1,"StopNode is not closed.");else if(t.substr(o+1,3)==="!--")o=f(t,"-->",o+3,"StopNode is not closed.");else if(t.substr(o+1,2)==="![")o=f(t,"]]>",o,"StopNode is not closed.")-2;else{const b=l(t,o,">");b&&((b&&b.tagName)===n&&b.tagExp[b.tagExp.length-1]!=="/"&&p++,o=b.closeIndex)}}function i(t,n,o){if(n&&typeof t=="string"){const c=t.trim();return c==="true"?!0:c==="false"?!1:L(t,o)}else return M.isExist(t)?t:""}V.exports=_},"./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js":function(V,ae,I){const{buildOptions:M}=I("./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js"),U=I("./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js"),{prettify:s}=I("./node_modules/fast-xml-parser/src/xmlparser/node2json.js"),L=I("./node_modules/fast-xml-parser/src/validator.js");class P{constructor(C){this.externalEntities={},this.options=M(C)}parse(C,d){if(typeof C!="string")if(C.toString)C=C.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(d){d===!0&&(d={});const k=L.validate(C,d);if(k!==!0)throw Error(`${k.err.msg}:${k.err.line}:${k.err.col}`)}const T=new U(this.options);T.addExternalEntities(this.externalEntities);const h=T.parseXml(C);return this.options.preserveOrder||h===void 0?h:s(h,this.options)}addEntity(C,d){if(d.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(C.indexOf("&")!==-1||C.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(d==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[C]=d}}V.exports=P},"./node_modules/fast-xml-parser/src/xmlparser/node2json.js":function(V,ae,I){function M(_,C){return U(_,C)}function U(_,C,d){let T;const h={};for(let k=0;k<_.length;k++){const A=_[k],B=s(A);let w="";if(d===void 0?w=B:w=d+"."+B,B===C.textNodeName)T===void 0?T=A[B]:T+=""+A[B];else{if(B===void 0)continue;if(A[B]){let N=U(A[B],C,w);const H=P(N,C);A[":@"]?L(N,A[":@"],w,C):Object.keys(N).length===1&&N[C.textNodeName]!==void 0&&!C.alwaysCreateTextNode?N=N[C.textNodeName]:Object.keys(N).length===0&&(C.alwaysCreateTextNode?N[C.textNodeName]="":N=""),h[B]!==void 0&&h.hasOwnProperty(B)?(Array.isArray(h[B])||(h[B]=[h[B]]),h[B].push(N)):C.isArray(B,w,H)?h[B]=[N]:h[B]=N}}}return typeof T=="string"?T.length>0&&(h[C.textNodeName]=T):T!==void 0&&(h[C.textNodeName]=T),h}function s(_){const C=Object.keys(_);for(let d=0;d<C.length;d++){const T=C[d];if(T!==":@")return T}}function L(_,C,d,T){if(C){const h=Object.keys(C),k=h.length;for(let A=0;A<k;A++){const B=h[A];T.isArray(B,d+"."+B,!0,!0)?_[B]=[C[B]]:_[B]=C[B]}}}function P(_,C){const{textNodeName:d}=C,T=Object.keys(_).length;return!!(T===0||T===1&&(_[d]||typeof _[d]=="boolean"||_[d]===0))}ae.prettify=M},"./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js":function(V,ae,I){class M{constructor(s){this.tagname=s,this.child=[],this[":@"]={}}add(s,L){s==="__proto__"&&(s="#__proto__"),this.child.push({[s]:L})}addChild(s){s.tagname==="__proto__"&&(s.tagname="#__proto__"),s[":@"]&&Object.keys(s[":@"]).length>0?this.child.push({[s.tagname]:s.child,":@":s[":@"]}):this.child.push({[s.tagname]:s.child})}}V.exports=M},"./node_modules/process/browser.js":function(V,ae){var I=V.exports={},M,U;function s(){throw new Error("setTimeout has not been defined")}function L(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?M=setTimeout:M=s}catch{M=s}try{typeof clearTimeout=="function"?U=clearTimeout:U=L}catch{U=L}})();function P(N){if(M===setTimeout)return setTimeout(N,0);if((M===s||!M)&&setTimeout)return M=setTimeout,setTimeout(N,0);try{return M(N,0)}catch{try{return M.call(null,N,0)}catch{return M.call(this,N,0)}}}function _(N){if(U===clearTimeout)return clearTimeout(N);if((U===L||!U)&&clearTimeout)return U=clearTimeout,clearTimeout(N);try{return U(N)}catch{try{return U.call(null,N)}catch{return U.call(this,N)}}}var C=[],d=!1,T,h=-1;function k(){!d||!T||(d=!1,T.length?C=T.concat(C):h=-1,C.length&&A())}function A(){if(!d){var N=P(k);d=!0;for(var H=C.length;H;){for(T=C,C=[];++h<H;)T&&T[h].run();h=-1,H=C.length}T=null,d=!1,_(N)}}I.nextTick=function(N){var H=new Array(arguments.length-1);if(arguments.length>1)for(var D=1;D<arguments.length;D++)H[D-1]=arguments[D];C.push(new B(N,H)),C.length===1&&!d&&P(A)};function B(N,H){this.fun=N,this.array=H}B.prototype.run=function(){this.fun.apply(null,this.array)},I.title="browser",I.browser=!0,I.env={},I.argv=[],I.version="",I.versions={};function w(){}I.on=w,I.addListener=w,I.once=w,I.off=w,I.removeListener=w,I.removeAllListeners=w,I.emit=w,I.prependListener=w,I.prependOnceListener=w,I.listeners=function(N){return[]},I.binding=function(N){throw new Error("process.binding is not supported")},I.cwd=function(){return"/"},I.chdir=function(N){throw new Error("process.chdir is not supported")},I.umask=function(){return 0}},"./node_modules/strnum/strnum.js":function(V,ae){const I=/^[-+]?0x[a-fA-F0-9]+$/,M=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const U={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function s(P,_={}){if(_=Object.assign({},U,_),!P||typeof P!="string")return P;let C=P.trim();if(_.skipLike!==void 0&&_.skipLike.test(C))return P;if(_.hex&&I.test(C))return Number.parseInt(C,16);{const d=M.exec(C);if(d){const T=d[1],h=d[2];let k=L(d[3]);const A=d[4]||d[6];if(!_.leadingZeros&&h.length>0&&T&&C[2]!==".")return P;if(!_.leadingZeros&&h.length>0&&!T&&C[1]!==".")return P;{const B=Number(C),w=""+B;return w.search(/[eE]/)!==-1||A?_.eNotation?B:P:C.indexOf(".")!==-1?w==="0"&&k===""||w===k||T&&w==="-"+k?B:P:h?k===w||T+k===w?B:P:C===w||C===T+w?B:P}}else return P}}function L(P){return P&&P.indexOf(".")!==-1&&(P=P.replace(/0+$/,""),P==="."?P="0":P[0]==="."?P="0"+P:P[P.length-1]==="."&&(P=P.substr(0,P.length-1))),P}V.exports=s},"./node_modules/webpack/buildin/amd-options.js":function(V,ae){(function(I){V.exports=I}).call(this,{})},"./node_modules/webpack/buildin/module.js":function(V,ae){V.exports=function(I){return I.webpackPolyfill||(I.deprecate=function(){},I.paths=[],I.children||(I.children=[]),Object.defineProperty(I,"loaded",{enumerable:!0,get:function(){return I.l}}),Object.defineProperty(I,"id",{enumerable:!0,get:function(){return I.i}}),I.webpackPolyfill=1),I}},"./package.json":function(V){V.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.8.7","description":"JavaScript SDK for [腾讯云对象存储](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"prettier":"prettier --write src demo/demo.js demo/CIDemos/*.js test/test.js server/sts.js lib/request.js index.d.ts","server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m","test":"jest --runInBand --coverage"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"fast-xml-parser":"4.5.0"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","prettier":"^3.0.1","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","uglifyjs":"^2.4.11","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},"./src/advance.js":function(V,ae,I){var M=I("./node_modules/@babel/runtime/helpers/typeof.js"),U=I("./src/session.js"),s=I("./src/async.js"),L=I("./src/event.js").EventProxy,P=I("./src/util.js"),_=I("./src/tracker.js");function C(i,t){var n=this,o=new L,c=i.TaskId,p=i.Bucket,b=i.Region,R=i.Key,j=i.Body,F=i.ChunkSize||i.SliceSize||n.options.ChunkSize,J=i.AsyncLimit,$=i.StorageClass,Y=i.ServerSideEncryption,te,he,ue=i.onHashProgress,ie=i.tracker;ie&&ie.setParams({chunkSize:F}),o.on("error",function(Z){if(n._isRunningTask(c))return i.UploadData.UploadId&&U.removeUsing(i.UploadData.UploadId),Z.UploadId=i.UploadData.UploadId||"",t(Z)}),o.on("upload_complete",function(Z){var G=P.extend({UploadId:i.UploadData.UploadId||""},Z);t(null,G)}),o.on("upload_slice_complete",function(Z){var G={};P.each(i.Headers,function(ee,de){var ce=de.toLowerCase();(ce.indexOf("x-cos-meta-")===0||["pic-operations","x-cos-callback","x-cos-callback-var","x-cos-return-body"].includes(ce))&&(G[de]=ee)}),B.call(n,{Bucket:p,Region:b,Key:R,UploadId:Z.UploadId,SliceList:Z.SliceList,Headers:G,tracker:ie},function(ee,de){if(n._isRunningTask(c)){if(U.removeUsing(Z.UploadId),ee)return he(null,!0),o.emit("error",ee);U.removeUploadId.call(n,Z.UploadId),he({loaded:te,total:te},!0),o.emit("upload_complete",de)}})}),o.on("get_upload_data_finish",function(Z){var G=U.getFileId(j,i.ChunkSize,p,R);G&&U.saveUploadId.call(n,G,Z.UploadId,n.options.UploadIdCacheLimit),U.setUsing(Z.UploadId),he(null,!0),k.call(n,{TaskId:c,Bucket:p,Region:b,Key:R,Body:j,FileSize:te,SliceSize:F,AsyncLimit:J,ServerSideEncryption:Y,UploadData:Z,Headers:i.Headers,onProgress:he,tracker:ie},function(ee,de){if(n._isRunningTask(c)){if(ee)return he(null,!0),o.emit("error",ee);o.emit("upload_slice_complete",de)}})}),o.on("get_file_size_finish",function(){if(he=P.throttleOnProgress.call(n,te,i.onProgress),i.UploadData.UploadId)o.emit("get_upload_data_finish",i.UploadData);else{var Z=P.extend({TaskId:c,Bucket:p,Region:b,Key:R,Headers:i.Headers,StorageClass:$,Body:j,FileSize:te,SliceSize:F,onHashProgress:ue,tracker:ie},i);d.call(n,Z,function(G,ee){if(n._isRunningTask(c)){if(G)return o.emit("error",G);i.UploadData.UploadId=ee.UploadId,i.UploadData.PartList=ee.PartList,o.emit("get_upload_data_finish",i.UploadData)}})}}),te=i.ContentLength,delete i.ContentLength,!i.Headers&&(i.Headers={}),P.each(i.Headers,function(Z,G){G.toLowerCase()==="content-length"&&delete i.Headers[G]}),function(){for(var Z=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],G=1024*1024,ee=0;ee<Z.length&&(G=Z[ee]*1024*1024,!(te/G<=n.options.MaxPartNumber));ee++);i.ChunkSize=i.SliceSize=F=Math.max(F,G)}(),te===0?(i.Body="",i.ContentLength=0,i.SkipTask=!0,n.putObject(i,t)):o.emit("get_file_size_finish")}function d(i,t){var n=i.TaskId,o=i.Bucket,c=i.Region,p=i.Key,b=i.StorageClass,R=this,j={},F=i.FileSize,J=i.SliceSize,$=Math.ceil(F/J),Y=0,te=P.throttleOnProgress.call(R,F,i.onHashProgress),he=function(G,ee){var de=J*(G-1),ce=Math.min(de+J,F),re=ce-de;j[G]?ee(null,{PartNumber:G,ETag:j[G],Size:re}):P.fileSlice(i.Body,de,ce,!1,function(oe){P.getFileMd5(oe,function(ye,ge){if(ye)return ee(P.error(ye));var ke='"'+ge+'"';j[G]=ke,Y+=re,te({loaded:Y,total:F}),ee(null,{PartNumber:G,ETag:ke,Size:re})})})},ue=function(G,ee){var de=G.length;if(de===0)return ee(null,!0);if(de>$)return ee(null,!1);if(de>1){var ce=Math.max(G[0].Size,G[1].Size);if(ce!==J)return ee(null,!1)}var re=function oe(ye){if(ye<de){var ge=G[ye];he(ge.PartNumber,function(ke,me){me&&me.ETag===ge.ETag&&me.Size===ge.Size?oe(ye+1):ee(null,!1)})}else ee(null,!0)};re(0)},ie=new L;ie.on("error",function(Z){if(R._isRunningTask(n))return t(Z)}),ie.on("upload_id_available",function(Z){var G={},ee=[];P.each(Z.PartList,function(re){G[re.PartNumber]=re});for(var de=1;de<=$;de++){var ce=G[de];ce?(ce.PartNumber=de,ce.Uploaded=!0):ce={PartNumber:de,ETag:null,Uploaded:!1},ee.push(ce)}Z.PartList=ee,t(null,Z)}),ie.on("no_available_upload_id",function(){if(R._isRunningTask(n)){var Z=P.extend({Bucket:o,Region:c,Key:p,Query:P.clone(i.Query),StorageClass:b,Body:i.Body,calledBySdk:"sliceUploadFile",tracker:i.tracker},i),G=P.clone(i.Headers);delete G["x-cos-mime-limit"],Z.Headers=G,R.multipartInit(Z,function(ee,de){if(R._isRunningTask(n)){if(ee)return ie.emit("error",ee);var ce=de.UploadId;if(!ce)return t(P.error(new Error("no such upload id")));ie.emit("upload_id_available",{UploadId:ce,PartList:[]})}})}}),ie.on("has_and_check_upload_id",function(Z){Z=Z.reverse(),s.eachLimit(Z,1,function(G,ee){if(R._isRunningTask(n)){if(U.using[G]){ee();return}h.call(R,{Bucket:o,Region:c,Key:p,UploadId:G,tracker:i.tracker},function(de,ce){if(R._isRunningTask(n)){if(de)return U.removeUsing(G),ie.emit("error",de);var re=ce.PartList;re.forEach(function(oe){oe.PartNumber*=1,oe.Size*=1,oe.ETag=oe.ETag||""}),ue(re,function(oe,ye){if(R._isRunningTask(n)){if(oe)return ie.emit("error",oe);ye?ee({UploadId:G,PartList:re}):ee()}})}})}},function(G){R._isRunningTask(n)&&(te(null,!0),G&&G.UploadId?ie.emit("upload_id_available",G):ie.emit("no_available_upload_id"))})}),ie.on("seek_local_avail_upload_id",function(Z){var G=U.getFileId(i.Body,i.ChunkSize,o,p),ee=U.getUploadIdList.call(R,G);if(!G||!ee){ie.emit("has_and_check_upload_id",Z);return}var de=function ce(re){if(re>=ee.length){ie.emit("has_and_check_upload_id",Z);return}var oe=ee[re];if(!P.isInArray(Z,oe)){U.removeUploadId.call(R,oe),ce(re+1);return}if(U.using[oe]){ce(re+1);return}h.call(R,{Bucket:o,Region:c,Key:p,UploadId:oe,tracker:i.tracker},function(ye,ge){R._isRunningTask(n)&&(ye?(U.removeUploadId.call(R,oe),ce(re+1)):ie.emit("upload_id_available",{UploadId:oe,PartList:ge.PartList}))})};de(0)}),ie.on("get_remote_upload_id_list",function(){T.call(R,{Bucket:o,Region:c,Key:p,tracker:i.tracker},function(Z,G){if(R._isRunningTask(n)){if(Z)return ie.emit("error",Z);var ee=P.filter(G.UploadList,function(re){return re.Key===p&&(!b||re.StorageClass.toUpperCase()===b.toUpperCase())}).reverse().map(function(re){return re.UploadId||re.UploadID});if(ee.length)ie.emit("seek_local_avail_upload_id",ee);else{var de=U.getFileId(i.Body,i.ChunkSize,o,p),ce;de&&(ce=U.getUploadIdList.call(R,de))&&P.each(ce,function(re){U.removeUploadId.call(R,re)}),ie.emit("no_available_upload_id")}}})}),ie.emit("get_remote_upload_id_list")}function T(i,t){var n=this,o=[],c={Bucket:i.Bucket,Region:i.Region,Prefix:i.Key,calledBySdk:i.calledBySdk||"sliceUploadFile",tracker:i.tracker},p=function b(){n.multipartList(c,function(R,j){if(R)return t(R);o.push.apply(o,j.Upload||[]),j.IsTruncated==="true"?(c.KeyMarker=j.NextKeyMarker,c.UploadIdMarker=j.NextUploadIdMarker,b()):t(null,{UploadList:o})})};p()}function h(i,t){var n=this,o=[],c={Bucket:i.Bucket,Region:i.Region,Key:i.Key,UploadId:i.UploadId,calledBySdk:"sliceUploadFile",tracker:i.tracker},p=function b(){n.multipartListPart(c,function(R,j){if(R)return t(R);o.push.apply(o,j.Part||[]),j.IsTruncated==="true"?(c.PartNumberMarker=j.NextPartNumberMarker,b()):t(null,{PartList:o})})};p()}function k(i,t){var n=this,o=i.TaskId,c=i.Bucket,p=i.Region,b=i.Key,R=i.UploadData,j=i.FileSize,F=i.SliceSize,J=Math.min(i.AsyncLimit||n.options.ChunkParallelLimit||1,256),$=i.Body,Y=Math.ceil(j/F),te=0,he=i.ServerSideEncryption,ue=i.Headers,ie=P.filter(R.PartList,function(G){return G.Uploaded&&(te+=G.PartNumber>=Y&&j%F||F),!G.Uploaded}),Z=i.onProgress;s.eachLimit(ie,J,function(G,ee){if(n._isRunningTask(o)){var de=G.PartNumber,ce=Math.min(j,G.PartNumber*F)-(G.PartNumber-1)*F,re=0;A.call(n,{TaskId:o,Bucket:c,Region:p,Key:b,SliceSize:F,FileSize:j,PartNumber:de,ServerSideEncryption:he,Body:$,UploadData:R,Headers:ue,onProgress:function(ye){te+=ye.loaded-re,re=ye.loaded,Z({loaded:te,total:j})},tracker:i.tracker},function(oe,ye){n._isRunningTask(o)&&(!oe&&!ye.ETag&&(oe='get ETag error, please add "ETag" to CORS ExposeHeader setting.( 获取ETag失败，请在CORS ExposeHeader设置中添加ETag，请参考文档：https://cloud.tencent.com/document/product/436/13318 )'),oe?te-=re:(te+=ce-re,G.ETag=ye.ETag),Z({loaded:te,total:j}),ee(oe||null,ye))})}},function(G){if(n._isRunningTask(o)){if(G)return t(G);t(null,{UploadId:R.UploadId,SliceList:R.PartList})}})}function A(i,t){var n=this,o=i.TaskId,c=i.Bucket,p=i.Region,b=i.Key,R=i.FileSize,j=i.Body,F=i.PartNumber*1,J=i.SliceSize,$=i.ServerSideEncryption,Y=i.UploadData,te=i.Headers||{},he=n.options.ChunkRetryTimes+1,ue=J*(F-1),ie=J,Z=ue+J;Z>R&&(Z=R,ie=Z-ue);var G=["x-cos-traffic-limit","x-cos-mime-limit"],ee={};P.each(te,function(ce,re){G.indexOf(re)>-1&&(ee[re]=ce)});var de=Y.PartList[F-1];s.retry(he,function(ce){n._isRunningTask(o)&&P.fileSlice(j,ue,Z,!0,function(re){n.multipartUpload({TaskId:o,Bucket:c,Region:p,Key:b,ContentLength:ie,PartNumber:F,UploadId:Y.UploadId,ServerSideEncryption:$,Body:re,Headers:ee,onProgress:i.onProgress,calledBySdk:"sliceUploadFile",tracker:i.tracker},function(oe,ye){if(n._isRunningTask(o))return oe?ce(oe):(de.Uploaded=!0,ce(null,ye))})})},function(ce,re){if(n._isRunningTask(o))return t(ce,re)})}function B(i,t){var n=i.Bucket,o=i.Region,c=i.Key,p=i.UploadId,b=i.SliceList,R=this,j=this.options.ChunkRetryTimes+1,F=i.Headers,J=b.map(function($){return{PartNumber:$.PartNumber,ETag:$.ETag}});s.retry(j,function($){R.multipartComplete({Bucket:n,Region:o,Key:c,UploadId:p,Parts:J,Headers:F,calledBySdk:"sliceUploadFile",tracker:i.tracker},$)},function($,Y){t($,Y)})}function w(i,t){var n=i.Bucket,o=i.Region,c=i.Key,p=i.UploadId,b=i.Level||"task",R=i.AsyncLimit,j=this,F=new L;if(F.on("error",function(J){return t(J)}),F.on("get_abort_array",function(J){N.call(j,{Bucket:n,Region:o,Key:c,Headers:i.Headers,AsyncLimit:R,AbortArray:J},t)}),b==="bucket")T.call(j,{Bucket:n,Region:o,calledBySdk:"abortUploadTask"},function(J,$){if(J)return t(J);F.emit("get_abort_array",$.UploadList||[])});else if(b==="file"){if(!c)return t(P.error(new Error("abort_upload_task_no_key")));T.call(j,{Bucket:n,Region:o,Key:c,calledBySdk:"abortUploadTask"},function(J,$){if(J)return t(J);F.emit("get_abort_array",$.UploadList||[])})}else if(b==="task"){if(!p)return t(P.error(new Error("abort_upload_task_no_id")));if(!c)return t(P.error(new Error("abort_upload_task_no_key")));F.emit("get_abort_array",[{Key:c,UploadId:p}])}else return t(P.error(new Error("abort_unknown_level")))}function N(i,t){var n=i.Bucket,o=i.Region,c=i.Key,p=i.AbortArray,b=i.AsyncLimit||1,R=this,j=0,F=new Array(p.length);s.eachLimit(p,b,function(J,$){var Y=j;if(c&&c!==J.Key){F[Y]={error:{KeyNotMatch:!0}},$(null);return}var te=J.UploadId||J.UploadID;R.multipartAbort({Bucket:n,Region:o,Key:J.Key,Headers:i.Headers,UploadId:te},function(he){var ue={Bucket:n,Region:o,Key:J.Key,UploadId:te};F[Y]={error:he,task:ue},$(null)}),j++},function(J){if(J)return t(J);for(var $=[],Y=[],te=0,he=F.length;te<he;te++){var ue=F[te];ue.task&&(ue.error?Y.push(ue.task):$.push(ue.task))}return t(null,{successList:$,errorList:Y})})}function H(i,t){var n=this,o=i.SliceSize===void 0?n.options.SliceSize:i.SliceSize,c=[],p=i.Body,b=p.size||p.length||0,R={TaskId:""};if(n.options.EnableReporter){var j=n.options.UseAccelerate||typeof n.options.Domain=="string"&&n.options.Domain.includes("accelerate."),F=b>o?"sliceUploadFile":"putObject";i.tracker=new _({Beacon:n.options.BeaconReporter,clsReporter:n.options.ClsReporter,bucket:i.Bucket,region:i.Region,apiName:"uploadFile",realApi:F,fileKey:i.Key,fileSize:b,accelerate:j,deepTracker:n.options.DeepTracker,customId:n.options.CustomId,delay:n.options.TrackerDelay})}P.each(i,function(ue,ie){M(ue)!=="object"&&typeof ue!="function"&&(R[ie]=ue)});var J=i.onTaskReady,$=function(ie){R.TaskId=ie,J&&J(ie)};i.onTaskReady=$;var Y=b>o?"sliceUploadFile":"putObject",te=i.onFileFinish,he=function(ie,Z){i.tracker&&i.tracker.report(ie,Z),te&&te(ie,Z,R),t&&t(ie,Z)};c.push({api:Y,params:i,callback:he}),n._addTasks(c)}function D(i,t){var n=this,o=i.SliceSize===void 0?n.options.SliceSize:i.SliceSize,c=0,p=0,b=P.throttleOnProgress.call(n,p,i.onProgress),R=i.files.length,j=i.onFileFinish,F=Array(R),J=function(te,he,ue){b(null,!0),j&&j(te,he,ue),F[ue.Index]={options:ue,error:te,data:he},--R<=0&&t&&t(null,{files:F})},$=[];P.each(i.files,function(Y,te){(function(){var he=Y.Body,ue=he.size||he.length||0,ie={Index:te,TaskId:""};if(!n.options.UseRawKey&&Y.Key&&Y.Key.substr(0,1)==="/"&&(Y.Key=Y.Key.substr(1)),c+=ue,n.options.EnableReporter){var Z=n.options.UseAccelerate||typeof n.options.Domain=="string"&&n.options.Domain.includes("accelerate."),G=ue>o?"sliceUploadFile":"putObject";Y.tracker=new _({Beacon:n.options.BeaconReporter,clsReporter:n.options.ClsReporter,bucket:Y.Bucket,region:Y.Region,apiName:"uploadFiles",realApi:G,fileKey:Y.Key,fileSize:ue,accelerate:Z,deepTracker:n.options.DeepTracker,customId:n.options.CustomId,delay:n.options.TrackerDelay})}P.each(Y,function(me,Re){M(me)!=="object"&&typeof me!="function"&&(ie[Re]=me)});var ee=Y.onTaskReady,de=function(Re){ie.TaskId=Re,ee&&ee(Re)};Y.onTaskReady=de;var ce=0,re=Y.onProgress,oe=function(Re){p=p-ce+Re.loaded,ce=Re.loaded,re&&re(Re),b({loaded:p,total:c})};Y.onProgress=oe;var ye=ue>o?"sliceUploadFile":"putObject",ge=Y.onFileFinish,ke=function(Re,Oe){Y.tracker&&Y.tracker.report(Re,Oe),ge&&ge(Re,Oe),J&&J(Re,Oe,ie)};$.push({api:ye,params:Y,callback:ke})})()}),n._addTasks($)}function f(i,t){var n=new L,o=this,c=i.Bucket,p=i.Region,b=i.Key,R=i.CopySource,j=P.getSourceParams.call(this,R);if(!j){t(P.error(new Error("CopySource format error")));return}var F=j.Bucket,J=j.Region,$=decodeURIComponent(j.Key),Y=i.CopySliceSize===void 0?o.options.CopySliceSize:i.CopySliceSize;Y=Math.max(0,Y);var te=i.CopyChunkSize||this.options.CopyChunkSize,he=this.options.CopyChunkParallelLimit,ue=this.options.ChunkRetryTimes+1,ie=0,Z=0,G,ee,de={},ce={},re={};n.on("copy_slice_complete",function(oe){P.each(i.Headers,function(ge,ke){ke.toLowerCase().indexOf("x-cos-meta-")});var ye=P.map(oe.PartList,function(ge){return{PartNumber:ge.PartNumber,ETag:ge.ETag}});s.retry(ue,function(ge){o.multipartComplete({Bucket:c,Region:p,Key:b,UploadId:oe.UploadId,Parts:ye,tracker:i.tracker,calledBySdk:"sliceCopyFile"},ge)},function(ge,ke){if(U.removeUsing(oe.UploadId),ge)return ee(null,!0),t(ge);U.removeUploadId(oe.UploadId),ee({loaded:G,total:G},!0),t(null,ke)})}),n.on("get_copy_data_finish",function(oe){var ye=U.getCopyFileId(R,de,te,c,b);ye&&U.saveUploadId(ye,oe.UploadId,o.options.UploadIdCacheLimit),U.setUsing(oe.UploadId);var ge=P.filter(oe.PartList,function(ke){return ke.Uploaded&&(Z+=ke.PartNumber>=ie&&G%te||te),!ke.Uploaded});s.eachLimit(ge,he,function(ke,me){var Re=ke.PartNumber,Oe=ke.CopySourceRange,ze=ke.end-ke.start;s.retry(ue,function(Me){l.call(o,{Bucket:c,Region:p,Key:b,CopySource:R,UploadId:oe.UploadId,PartNumber:Re,CopySourceRange:Oe,tracker:i.tracker,calledBySdk:"sliceCopyFile"},Me)},function(Me,De){if(Me)return me(Me);Z+=ze,ee({loaded:Z,total:G}),ke.ETag=De.ETag,me(Me||null,De)})},function(ke){if(ke)return U.removeUsing(oe.UploadId),ee(null,!0),t(ke);n.emit("copy_slice_complete",oe)})}),n.on("get_chunk_size_finish",function(){var oe=function(){o.multipartInit({Bucket:c,Region:p,Key:b,Headers:re,tracker:i.tracker,calledBySdk:"sliceCopyFile"},function(Re,Oe){if(Re)return t(Re);i.UploadId=Oe.UploadId,n.emit("get_copy_data_finish",{UploadId:i.UploadId,PartList:i.PartList})})},ye=U.getCopyFileId(R,de,te,c,b),ge=U.getUploadIdList(ye);if(!ye||!ge)return oe();var ke=function me(Re){if(Re>=ge.length)return oe();var Oe=ge[Re];if(U.using[Oe])return me(Re+1);h.call(o,{Bucket:c,Region:p,Key:b,UploadId:Oe,tracker:i.tracker,calledBySdk:"sliceCopyFile"},function(ze,Me){if(ze)U.removeUploadId(Oe),me(Re+1);else{if(U.using[Oe])return me(Re+1);var De={},$e=0;P.each(Me.PartList,function(je){var We=parseInt(je.Size),tt=$e+We-1;De[je.PartNumber+"|"+$e+"|"+tt]=je.ETag,$e+=We}),P.each(i.PartList,function(je){var We=De[je.PartNumber+"|"+je.start+"|"+je.end];We&&(je.ETag=We,je.Uploaded=!0)}),n.emit("get_copy_data_finish",{UploadId:Oe,PartList:i.PartList})}})};ke(0)}),n.on("get_file_size_finish",function(){if(function(){for(var ye=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],ge=1024*1024,ke=0;ke<ye.length&&(ge=ye[ke]*1024*1024,!(G/ge<=o.options.MaxPartNumber));ke++);i.ChunkSize=te=Math.max(te,ge),ie=Math.ceil(G/te);for(var me=[],Re=1;Re<=ie;Re++){var Oe=(Re-1)*te,ze=Re*te<G?Re*te-1:G-1,Me={PartNumber:Re,start:Oe,end:ze,CopySourceRange:"bytes="+Oe+"-"+ze};me.push(Me)}i.PartList=me}(),i.Headers["x-cos-metadata-directive"]==="Replaced"?re=i.Headers:re=ce,re["x-cos-storage-class"]=i.Headers["x-cos-storage-class"]||ce["x-cos-storage-class"],re=P.clearKey(re),ce["x-cos-storage-class"]==="ARCHIVE"||ce["x-cos-storage-class"]==="DEEP_ARCHIVE"){var oe=ce["x-cos-restore"];if(!oe||oe==='ongoing-request="true"'){t(P.error(new Error("Unrestored archive object is not allowed to be copied")));return}}delete re["x-cos-copy-source"],delete re["x-cos-metadata-directive"],delete re["x-cos-copy-source-If-Modified-Since"],delete re["x-cos-copy-source-If-Unmodified-Since"],delete re["x-cos-copy-source-If-Match"],delete re["x-cos-copy-source-If-None-Match"],n.emit("get_chunk_size_finish")}),o.headObject({Bucket:F,Region:J,Key:$,tracker:i.tracker,calledBySdk:"sliceCopyFile"},function(oe,ye){if(oe){oe.statusCode&&oe.statusCode===404?t(P.error(oe,{ErrorStatus:$+" Not Exist"})):t(oe);return}if(G=i.FileSize=ye.headers["content-length"],G===void 0||!G){t(P.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.（ 获取Content-Length失败，请在CORS ExposeHeader设置中添加Content-Length，请参考文档：https://cloud.tencent.com/document/product/436/13318 ）')));return}if(i.tracker&&i.tracker.setParams({httpSize:G}),ee=P.throttleOnProgress.call(o,G,i.onProgress),G<=Y)i.Headers["x-cos-metadata-directive"]||(i.Headers["x-cos-metadata-directive"]="Copy"),o.putObjectCopy(Object.assign(i,{calledBySdk:"sliceCopyFile"}),function(ke,me){if(ke)return ee(null,!0),t(ke);ee({loaded:G,total:G},!0),t(ke,me)});else{var ge=ye.headers;de=ge,ce={"Cache-Control":ge["cache-control"],"Content-Disposition":ge["content-disposition"],"Content-Encoding":ge["content-encoding"],"Content-Type":ge["content-type"],Expires:ge.expires,"x-cos-storage-class":ge["x-cos-storage-class"]},P.each(ge,function(ke,me){var Re="x-cos-meta-";me.indexOf(Re)===0&&me.length>Re.length&&(ce[me]=ke)}),n.emit("get_file_size_finish")}})}function l(i,t){var n=i.TaskId,o=i.Bucket,c=i.Region,p=i.Key,b=i.CopySource,R=i.UploadId,j=i.PartNumber*1,F=i.CopySourceRange,J=this.options.ChunkRetryTimes+1,$=this;s.retry(J,function(Y){$.uploadPartCopy({TaskId:n,Bucket:o,Region:c,Key:p,CopySource:b,UploadId:R,PartNumber:j,CopySourceRange:F,tracker:i.tracker,calledBySdk:i.calledBySdk},function(te,he){Y(te||null,he)})},function(Y,te){return t(Y,te)})}var S={sliceUploadFile:C,abortUploadTask:w,uploadFile:H,uploadFiles:D,sliceCopyFile:f};V.exports.init=function(i,t){t.transferToTaskMethod(S,"sliceUploadFile"),P.each(S,function(n,o){i.prototype[o]=P.apiWrapper(o,n)})}},"./src/async.js":function(V,ae){var I=function(L,P,_,C){if(C=C||function(){},!L.length||P<=0)return C();var d=0,T=0,h=0;(function k(){if(d>=L.length)return C();for(;h<P&&T<L.length;)T+=1,h+=1,_(L[T-1],function(A){A?(C(A),C=function(){}):(d+=1,h-=1,d>=L.length?C():k())})})()},M=function(L,P,_){var C=function d(T){P(function(h,k){h&&T<L?d(T+1):_(h,k)})};L<1?_():C(1)},U={eachLimit:I,retry:M};V.exports=U},"./src/base.js":function(V,ae,I){var M=I("./node_modules/@babel/runtime/helpers/typeof.js"),U=I("./lib/request.js"),s=I("./src/util.js");function L(e,a){var r=this.options.Protocol||(s.isBrowser&&(typeof location>"u"?"undefined":M(location))==="object"&&location.protocol==="http:"?"http:":"https:"),u=this.options.ServiceDomain,v=e.AppId||this.options.appId,g=e.Region;u?(u=u.replace(/\{\{AppId\}\}/gi,v||"").replace(/\{\{Region\}\}/gi,g||"").replace(/\{\{.*?\}\}/gi,""),/^[a-zA-Z]+:\/\//.test(u)||(u=r+"//"+u),u.slice(-1)==="/"&&(u=u.slice(0,-1))):g?u=r+"//cos."+g+".myqcloud.com":u=r+"//service.cos.myqcloud.com";var y="",m=g?"cos."+g+".myqcloud.com":"service.cos.myqcloud.com",K=u.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");m===K&&(y=m),X.call(this,{Action:"name/cos:GetService",url:u,method:"GET",headers:e.Headers,SignHost:y,tracker:e.tracker},function(le,se){if(le)return a(le);var Te=se&&se.ListAllMyBucketsResult&&se.ListAllMyBucketsResult.Buckets&&se.ListAllMyBucketsResult.Buckets.Bucket||[];Te=s.isArray(Te)?Te:[Te];var W=se&&se.ListAllMyBucketsResult&&se.ListAllMyBucketsResult.Owner||{};a(null,{Buckets:Te,Owner:W,statusCode:se.statusCode,headers:se.headers})})}function P(e,a){var r=this,u="";if(e.BucketAZConfig){var v={BucketAZConfig:e.BucketAZConfig};u=s.json2xml({CreateBucketConfiguration:v})}X.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,body:u,tracker:e.tracker},function(g,y){if(g)return a(g);var m=Ke({protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});a(null,{Location:m,statusCode:y.statusCode,headers:y.headers})})}function _(e,a){X.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD",tracker:e.tracker},a)}function C(e,a){var r={};r.prefix=e.Prefix||"",r.delimiter=e.Delimiter,r.marker=e.Marker,r["max-keys"]=e.MaxKeys,r["encoding-type"]=e.EncodingType,X.call(this,{Action:"name/cos:GetBucket",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,tracker:e.tracker},function(u,v){if(u)return a(u);var g=v.ListBucketResult||{},y=g.Contents||[],m=g.CommonPrefixes||[];y=s.isArray(y)?y:[y],m=s.isArray(m)?m:[m];var K=s.clone(g);s.extend(K,{Contents:y,CommonPrefixes:m,statusCode:v.statusCode,headers:v.headers}),a(null,K)})}function d(e,a){X.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function T(e,a){var r=e.Headers,u="";if(e.AccessControlPolicy){var v=s.clone(e.AccessControlPolicy||{}),g=v.Grants||v.Grant;g=s.isArray(g)?g:[g],delete v.Grant,delete v.Grants,v.AccessControlList={Grant:g},u=s.json2xml({AccessControlPolicy:v}),r["Content-Type"]="application/xml",r["Content-MD5"]=s.b64(s.md5(u))}s.each(r,function(y,m){m.indexOf("x-cos-grant-")===0&&(r[m]=qe(r[m]))}),X.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:r,action:"acl",body:u,tracker:e.tracker},function(y,m){if(y)return a(y);a(null,{statusCode:m.statusCode,headers:m.headers})})}function h(e,a){X.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl",tracker:e.tracker},function(r,u){if(r)return a(r);var v=u.AccessControlPolicy||{},g=v.Owner||{},y=v.AccessControlList.Grant||[];y=s.isArray(y)?y:[y];var m=xe(v);u.headers&&u.headers["x-cos-acl"]&&(m.ACL=u.headers["x-cos-acl"]),m=s.extend(m,{Owner:g,Grants:y,statusCode:u.statusCode,headers:u.headers}),a(null,m)})}function k(e,a){var r=e.CORSConfiguration||{},u=r.CORSRules||e.CORSRules||[];u=s.clone(s.isArray(u)?u:[u]),s.each(u,function(m){s.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(K){var le=K+"s",se=m[le]||m[K]||[];delete m[le],m[K]=s.isArray(se)?se:[se]})});var v={CORSRule:u};e.ResponseVary&&(v.ResponseVary=e.ResponseVary);var g=s.json2xml({CORSConfiguration:v}),y=e.Headers;y["Content-Type"]="application/xml",y["Content-MD5"]=s.b64(s.md5(g)),X.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:g,action:"cors",headers:y,tracker:e.tracker},function(m,K){if(m)return a(m);a(null,{statusCode:K.statusCode,headers:K.headers})})}function A(e,a){X.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&r.error.Code==="NoSuchCORSConfiguration"){var v={CORSRules:[],statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}var g=u.CORSConfiguration||{},y=g.CORSRules||g.CORSRule||[];y=s.clone(s.isArray(y)?y:[y]);var m=g.ResponseVary;s.each(y,function(K){s.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(le){var se=le+"s",Te=K[se]||K[le]||[];delete K[le],K[se]=s.isArray(Te)?Te:[Te]})}),a(null,{CORSRules:y,ResponseVary:m,statusCode:u.statusCode,headers:u.headers})})}function B(e,a){X.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode||r.statusCode,headers:u.headers})})}function w(e,a){X.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location",tracker:e.tracker},a)}function N(e,a){var r=e.Policy;try{typeof r=="string"&&(r=JSON.parse(r))}catch{}if(!r||typeof r=="string")return a(s.error(new Error("Policy format error")));var u=JSON.stringify(r);r.version||(r.version="2.0");var v=e.Headers;v["Content-Type"]="application/json",v["Content-MD5"]=s.b64(s.md5(u)),X.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:u,headers:v,tracker:e.tracker},function(g,y){if(g&&g.statusCode===204)return a(null,{statusCode:g.statusCode});if(g)return a(g);a(null,{statusCode:y.statusCode,headers:y.headers})})}function H(e,a){X.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0,tracker:e.tracker},function(r,u){if(r)return r.statusCode&&r.statusCode===403?a(s.error(r,{ErrorStatus:"Access Denied"})):r.statusCode&&r.statusCode===405?a(s.error(r,{ErrorStatus:"Method Not Allowed"})):r.statusCode&&r.statusCode===404?a(s.error(r,{ErrorStatus:"Policy Not Found"})):a(r);var v={};try{v=JSON.parse(u.body)}catch{}a(null,{Policy:v,statusCode:u.statusCode,headers:u.headers})})}function D(e,a){X.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode||r.statusCode,headers:u.headers})})}function f(e,a){var r=e.Tagging||{},u=r.TagSet||r.Tags||e.Tags||[];u=s.clone(s.isArray(u)?u:[u]);var v=s.json2xml({Tagging:{TagSet:{Tag:u}}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"tagging",headers:g,tracker:e.tracker},function(y,m){if(y&&y.statusCode===204)return a(null,{statusCode:y.statusCode});if(y)return a(y);a(null,{statusCode:m.statusCode,headers:m.headers})})}function l(e,a){X.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&(r.error==="Not Found"||r.error.Code==="NoSuchTagSet")){var v={Tags:[],statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}var g=[];try{g=u.Tagging.TagSet.Tag||[]}catch{}g=s.clone(s.isArray(g)?g:[g]),a(null,{Tags:g,statusCode:u.statusCode,headers:u.headers})})}function S(e,a){X.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function i(e,a){var r=e.LifecycleConfiguration||{},u=r.Rules||e.Rules||[];u=s.clone(u);var v=s.json2xml({LifecycleConfiguration:{Rule:u}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"lifecycle",headers:g,tracker:e.tracker},function(y,m){if(y&&y.statusCode===204)return a(null,{statusCode:y.statusCode});if(y)return a(y);a(null,{statusCode:m.statusCode,headers:m.headers})})}function t(e,a){X.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&r.error.Code==="NoSuchLifecycleConfiguration"){var v={Rules:[],statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}var g=[];try{g=u.LifecycleConfiguration.Rule||[]}catch{}g=s.clone(s.isArray(g)?g:[g]),a(null,{Rules:g,statusCode:u.statusCode,headers:u.headers})})}function n(e,a){X.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function o(e,a){if(!e.VersioningConfiguration){a(s.error(new Error("missing param VersioningConfiguration")));return}var r=e.VersioningConfiguration||{},u=s.json2xml({VersioningConfiguration:r}),v=e.Headers;v["Content-Type"]="application/xml",v["Content-MD5"]=s.b64(s.md5(u)),X.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"versioning",headers:v,tracker:e.tracker},function(g,y){if(g&&g.statusCode===204)return a(null,{statusCode:g.statusCode});if(g)return a(g);a(null,{statusCode:y.statusCode,headers:y.headers})})}function c(e,a){X.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning",tracker:e.tracker},function(r,u){r||!u.VersioningConfiguration&&(u.VersioningConfiguration={}),a(r,u)})}function p(e,a){var r=s.clone(e.ReplicationConfiguration),u=s.json2xml({ReplicationConfiguration:r});u=u.replace(/<(\/?)Rules>/gi,"<$1Rule>"),u=u.replace(/<(\/?)Tags>/gi,"<$1Tag>");var v=e.Headers;v["Content-Type"]="application/xml",v["Content-MD5"]=s.b64(s.md5(u)),X.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"replication",headers:v,tracker:e.tracker},function(g,y){if(g&&g.statusCode===204)return a(null,{statusCode:g.statusCode});if(g)return a(g);a(null,{statusCode:y.statusCode,headers:y.headers})})}function b(e,a){X.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&(r.error==="Not Found"||r.error.Code==="ReplicationConfigurationnotFoundError")){var v={ReplicationConfiguration:{Rules:[]},statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}!u.ReplicationConfiguration&&(u.ReplicationConfiguration={}),u.ReplicationConfiguration.Rule&&(u.ReplicationConfiguration.Rules=s.makeArray(u.ReplicationConfiguration.Rule),delete u.ReplicationConfiguration.Rule),a(r,u)})}function R(e,a){X.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function j(e,a){if(!e.WebsiteConfiguration){a(s.error(new Error("missing param WebsiteConfiguration")));return}var r=s.clone(e.WebsiteConfiguration||{}),u=r.RoutingRules||r.RoutingRule||[];u=s.isArray(u)?u:[u],delete r.RoutingRule,delete r.RoutingRules,u.length&&(r.RoutingRules={RoutingRule:u});var v=s.json2xml({WebsiteConfiguration:r}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"website",headers:g,tracker:e.tracker},function(y,m){if(y&&y.statusCode===204)return a(null,{statusCode:y.statusCode});if(y)return a(y);a(null,{statusCode:m.statusCode,headers:m.headers})})}function F(e,a){X.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"website",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error.Code==="NoSuchWebsiteConfiguration"){var v={WebsiteConfiguration:{},statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}var g=u.WebsiteConfiguration||{};if(g.RoutingRules){var y=s.clone(g.RoutingRules.RoutingRule||[]);y=s.makeArray(y),g.RoutingRules=y}a(null,{WebsiteConfiguration:g,statusCode:u.statusCode,headers:u.headers})})}function J(e,a){X.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"website",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function $(e,a){if(!e.RefererConfiguration){a(s.error(new Error("missing param RefererConfiguration")));return}var r=s.clone(e.RefererConfiguration||{}),u=r.DomainList||{},v=u.Domains||u.Domain||[];v=s.isArray(v)?v:[v],v.length&&(r.DomainList={Domain:v});var g=s.json2xml({RefererConfiguration:r}),y=e.Headers;y["Content-Type"]="application/xml",y["Content-MD5"]=s.b64(s.md5(g)),X.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:g,action:"referer",headers:y,tracker:e.tracker},function(m,K){if(m&&m.statusCode===204)return a(null,{statusCode:m.statusCode});if(m)return a(m);a(null,{statusCode:K.statusCode,headers:K.headers})})}function Y(e,a){X.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"referer",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error.Code==="NoSuchRefererConfiguration"){var v={WebsiteConfiguration:{},statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}var g=u.RefererConfiguration||{};if(g.DomainList){var y=s.makeArray(g.DomainList.Domain||[]);g.DomainList={Domains:y}}a(null,{RefererConfiguration:g,statusCode:u.statusCode,headers:u.headers})})}function te(e,a){var r=e.DomainConfiguration||{},u=r.DomainRule||e.DomainRule||[];u=s.clone(u);var v=s.json2xml({DomainConfiguration:{DomainRule:u}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"domain",headers:g,tracker:e.tracker},function(y,m){if(y&&y.statusCode===204)return a(null,{statusCode:y.statusCode});if(y)return a(y);a(null,{statusCode:m.statusCode,headers:m.headers})})}function he(e,a){X.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},function(r,u){if(r)return a(r);var v=[];try{v=u.DomainConfiguration.DomainRule||[]}catch{}v=s.clone(s.isArray(v)?v:[v]),a(null,{DomainRule:v,statusCode:u.statusCode,headers:u.headers})})}function ue(e,a){X.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function ie(e,a){var r=e.OriginConfiguration||{},u=r.OriginRule||e.OriginRule||[];u=s.clone(u);var v=s.json2xml({OriginConfiguration:{OriginRule:u}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"origin",headers:g,tracker:e.tracker},function(y,m){if(y&&y.statusCode===204)return a(null,{statusCode:y.statusCode});if(y)return a(y);a(null,{statusCode:m.statusCode,headers:m.headers})})}function Z(e,a){X.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},function(r,u){if(r)return a(r);var v=[];try{v=u.OriginConfiguration.OriginRule||[]}catch{}v=s.clone(s.isArray(v)?v:[v]),a(null,{OriginRule:v,statusCode:u.statusCode,headers:u.headers})})}function G(e,a){X.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function ee(e,a){var r=s.json2xml({BucketLoggingStatus:e.BucketLoggingStatus||""}),u=e.Headers;u["Content-Type"]="application/xml",u["Content-MD5"]=s.b64(s.md5(r)),X.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"logging",headers:u,tracker:e.tracker},function(v,g){if(v&&v.statusCode===204)return a(null,{statusCode:v.statusCode});if(v)return a(v);a(null,{statusCode:g.statusCode,headers:g.headers})})}function de(e,a){X.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"logging",tracker:e.tracker},function(r,u){if(r)return a(r);a(null,{BucketLoggingStatus:u.BucketLoggingStatus,statusCode:u.statusCode,headers:u.headers})})}function ce(e,a,r){var u=s.clone(a.InventoryConfiguration);if(u.OptionalFields){var v=u.OptionalFields||[];u.OptionalFields={Field:v}}if(u.Destination&&u.Destination.COSBucketDestination&&u.Destination.COSBucketDestination.Encryption){var g=u.Destination.COSBucketDestination.Encryption;Object.keys(g).indexOf("SSECOS")>-1&&(g["SSE-COS"]=g.SSECOS,delete g.SSECOS)}var y=s.json2xml({InventoryConfiguration:u}),m=a.Headers;m["Content-Type"]="application/xml",m["Content-MD5"]=s.b64(s.md5(y));var K=e==="PUT"?"name/cos:PutBucketInventory":"name/cos:PostBucketInventory";X.call(this,{Action:K,method:e,Bucket:a.Bucket,Region:a.Region,body:y,action:"inventory",qs:{id:a.Id},headers:m,tracker:a.tracker},function(le,se){if(le&&le.statusCode===204)return r(null,{statusCode:le.statusCode});if(le)return r(le);r(null,{statusCode:se.statusCode,headers:se.headers})})}function re(e,a){return ce.call(this,"PUT",e,a)}function oe(e,a){return ce.call(this,"POST",e,a)}function ye(e,a){X.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id},tracker:e.tracker},function(r,u){if(r)return a(r);var v=u.InventoryConfiguration;if(v&&v.OptionalFields&&v.OptionalFields.Field){var g=v.OptionalFields.Field;s.isArray(g)||(g=[g]),v.OptionalFields=g}if(v.Destination&&v.Destination.COSBucketDestination&&v.Destination.COSBucketDestination.Encryption){var y=v.Destination.COSBucketDestination.Encryption;Object.keys(y).indexOf("SSE-COS")>-1&&(y.SSECOS=y["SSE-COS"],delete y["SSE-COS"])}a(null,{InventoryConfiguration:v,statusCode:u.statusCode,headers:u.headers})})}function ge(e,a){X.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{"continuation-token":e.ContinuationToken},tracker:e.tracker},function(r,u){if(r)return a(r);var v=u.ListInventoryConfigurationResult,g=v.InventoryConfiguration||[];g=s.isArray(g)?g:[g],delete v.InventoryConfiguration,s.each(g,function(y){if(y&&y.OptionalFields&&y.OptionalFields.Field){var m=y.OptionalFields.Field;s.isArray(m)||(m=[m]),y.OptionalFields=m}if(y.Destination&&y.Destination.COSBucketDestination&&y.Destination.COSBucketDestination.Encryption){var K=y.Destination.COSBucketDestination.Encryption;Object.keys(K).indexOf("SSE-COS")>-1&&(K.SSECOS=K["SSE-COS"],delete K["SSE-COS"])}}),v.InventoryConfigurations=g,s.extend(v,{statusCode:u.statusCode,headers:u.headers}),a(null,v)})}function ke(e,a){X.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id},tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function me(e,a){if(!e.AccelerateConfiguration){a(s.error(new Error("missing param AccelerateConfiguration")));return}var r={AccelerateConfiguration:e.AccelerateConfiguration||{}},u=s.json2xml(r),v={};v["Content-Type"]="application/xml",v["Content-MD5"]=s.b64(s.md5(u)),X.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"accelerate",headers:v,tracker:e.tracker},function(g,y){if(g)return a(g);a(null,{statusCode:y.statusCode,headers:y.headers})})}function Re(e,a){X.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:e.Bucket,Region:e.Region,action:"accelerate",tracker:e.tracker},function(r,u){r||!u.AccelerateConfiguration&&(u.AccelerateConfiguration={}),a(r,u)})}function Oe(e,a){var r=e.ServerSideEncryptionConfiguration||{},u=r.Rule||r.Rules||[],v=s.json2xml({ServerSideEncryptionConfiguration:{Rule:u}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"encryption",headers:g,tracker:e.tracker},function(y,m){if(y&&y.statusCode===204)return a(null,{statusCode:y.statusCode});if(y)return a(y);a(null,{statusCode:m.statusCode,headers:m.headers})})}function ze(e,a){X.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.code==="NoSuchEncryptionConfiguration"){var v={EncryptionConfiguration:{Rules:[]},statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}var g=s.makeArray(u.EncryptionConfiguration&&u.EncryptionConfiguration.Rule||[]);u.EncryptionConfiguration={Rules:g},a(r,u)})}function Me(e,a){X.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function De(e,a){X.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},function(r,u){if(r){var v=r.statusCode;return e.Headers["If-Modified-Since"]&&v&&v===304?a(null,{NotModified:!0,statusCode:v}):a(r)}u.ETag=s.attr(u.headers,"etag",""),a(null,u)})}function $e(e,a){var r={};r.prefix=e.Prefix||"",r.delimiter=e.Delimiter,r["key-marker"]=e.KeyMarker,r["version-id-marker"]=e.VersionIdMarker,r["max-keys"]=e.MaxKeys,r["encoding-type"]=e.EncodingType,X.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,action:"versions",tracker:e.tracker},function(u,v){if(u)return a(u);var g=v.ListVersionsResult||{},y=g.DeleteMarker||[];y=s.isArray(y)?y:[y];var m=g.Version||[];m=s.isArray(m)?m:[m];var K=s.clone(g);delete K.DeleteMarker,delete K.Version,s.extend(K,{DeleteMarkers:y,Versions:m,statusCode:v.statusCode,headers:v.headers}),a(null,K)})}function je(e,a){if(this.options.ObjectKeySimplifyCheck){var r=s.simplifyPath(e.Key);if(r==="/"){a(s.error(new Error("The Getobject Key is illegal")));return}}var u=e.Query||{},v=e.QueryString||"",g=s.throttleOnProgress.call(this,0,e.onProgress),y=e.tracker;y&&y.setParams({signStartTime:new Date().getTime()}),u["response-content-type"]=e.ResponseContentType,u["response-content-language"]=e.ResponseContentLanguage,u["response-expires"]=e.ResponseExpires,u["response-cache-control"]=e.ResponseCacheControl,u["response-content-disposition"]=e.ResponseContentDisposition,u["response-content-encoding"]=e.ResponseContentEncoding,X.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,DataType:e.DataType,headers:e.Headers,qs:u,qsStr:v,rawBody:!0,onDownloadProgress:g,tracker:y},function(m,K){if(g(null,!0),m){var le=m.statusCode;return e.Headers["If-Modified-Since"]&&le&&le===304?a(null,{NotModified:!0}):a(m)}a(null,{Body:K.body,ETag:s.attr(K.headers,"etag",""),statusCode:K.statusCode,headers:K.headers})})}function We(e,a){var r=this,u=e.ContentLength,v=s.throttleOnProgress.call(r,u,e.onProgress),g=e.Headers;!g["Cache-Control"]&&!g["cache-control"]&&(g["Cache-Control"]=""),!g["Content-Type"]&&!g["content-type"]&&(g["Content-Type"]=e.Body&&e.Body.type||"");var y=e.UploadAddMetaMd5||r.options.UploadAddMetaMd5||r.options.UploadCheckContentMd5,m=e.tracker;y&&m&&m.setParams({md5StartTime:new Date().getTime()}),s.getBodyMd5(y,e.Body,function(K){K&&(m&&m.setParams({md5EndTime:new Date().getTime()}),r.options.UploadCheckContentMd5&&(g["Content-MD5"]=s.b64(K)),(e.UploadAddMetaMd5||r.options.UploadAddMetaMd5)&&(g["x-cos-meta-md5"]=K)),e.ContentLength!==void 0&&(g["Content-Length"]=e.ContentLength),v(null,!0),X.call(r,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:e.Query,body:e.Body,onProgress:v,tracker:m},function(le,se){if(le)return v(null,!0),a(le);v({loaded:u,total:u},!0);var Te=Ke({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:r.options.UseAccelerate?"accelerate":e.Region,object:e.Key});Te=Te.substr(Te.indexOf("://")+3),se.Location=Te,se.ETag=s.attr(se.headers,"etag",""),a(null,se)})},e.onHashProgress)}function tt(e,a){X.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId,action:e.Recursive?"recursive":"",tracker:e.tracker},function(r,u){if(r){var v=r.statusCode;return v&&v===404?a(null,{BucketNotFound:!0,statusCode:v}):a(r)}a(null,{statusCode:u.statusCode,headers:u.headers})})}function ut(e,a){var r={};e.VersionId&&(r.versionId=e.VersionId),X.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,action:"acl",tracker:e.tracker},function(u,v){if(u)return a(u);var g=v.AccessControlPolicy||{},y=g.Owner||{},m=g.AccessControlList&&g.AccessControlList.Grant||[];m=s.isArray(m)?m:[m];var K=xe(g);delete K.GrantWrite,v.headers&&v.headers["x-cos-acl"]&&(K.ACL=v.headers["x-cos-acl"]),K=s.extend(K,{Owner:y,Grants:m,statusCode:v.statusCode,headers:v.headers}),a(null,K)})}function ct(e,a){var r=e.Headers,u="";if(e.AccessControlPolicy){var v=s.clone(e.AccessControlPolicy||{}),g=v.Grants||v.Grant;g=s.isArray(g)?g:[g],delete v.Grant,delete v.Grants,v.AccessControlList={Grant:g},u=s.json2xml({AccessControlPolicy:v}),r["Content-Type"]="application/xml",r["Content-MD5"]=s.b64(s.md5(u))}s.each(r,function(y,m){m.indexOf("x-cos-grant-")===0&&(r[m]=qe(r[m]))}),X.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:r,body:u,tracker:e.tracker},function(y,m){if(y)return a(y);a(null,{statusCode:m.statusCode,headers:m.headers})})}function at(e,a){var r=e.Headers;r.Origin=e.Origin,r["Access-Control-Request-Method"]=e.AccessControlRequestMethod,r["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,X.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:r,tracker:e.tracker},function(u,v){if(u)return u.statusCode&&u.statusCode===403?a(null,{OptionsForbidden:!0,statusCode:u.statusCode}):a(u);var g=v.headers||{};a(null,{AccessControlAllowOrigin:g["access-control-allow-origin"],AccessControlAllowMethods:g["access-control-allow-methods"],AccessControlAllowHeaders:g["access-control-allow-headers"],AccessControlExposeHeaders:g["access-control-expose-headers"],AccessControlMaxAge:g["access-control-max-age"],statusCode:v.statusCode,headers:v.headers})})}function lt(e,a){var r=this,u=e.Headers;!u["Cache-Control"]&&!u["cache-control"]&&(u["Cache-Control"]="");var v=e.CopySource||"",g=s.getSourceParams.call(this,v);if(!g){a(s.error(new Error("CopySource format error")));return}var y=g.Bucket,m=g.Region,K=decodeURIComponent(g.Key);X.call(this,{Scope:[{action:"name/cos:GetObject",bucket:y,region:m,prefix:K},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},function(le,se){if(le)return a(le);var Te=s.clone(se.CopyObjectResult||{}),W=Ke({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0});s.extend(Te,{Location:W,statusCode:se.statusCode,headers:se.headers}),a(null,Te)})}function Ne(e,a){var r=e.CopySource||"",u=s.getSourceParams.call(this,r);if(!u){a(s.error(new Error("CopySource format error")));return}var v=u.Bucket,g=u.Region,y=decodeURIComponent(u.Key);X.call(this,{Scope:[{action:"name/cos:GetObject",bucket:v,region:g,prefix:y},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,tracker:e.tracker},function(m,K){if(m)return a(m);var le=s.clone(K.CopyPartResult||{});s.extend(le,{statusCode:K.statusCode,headers:K.headers}),a(null,le)})}function z(e,a){var r=e.Objects||[],u=e.Quiet;r=s.isArray(r)?r:[r];var v=s.json2xml({Delete:{Object:r,Quiet:u||!1}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v));var y=s.map(r,function(m){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:m.Key}});X.call(this,{Scope:y,method:"POST",Bucket:e.Bucket,Region:e.Region,body:v,action:"delete",headers:g,tracker:e.tracker},function(m,K){if(m)return a(m);var le=K.DeleteResult||{},se=le.Deleted||[],Te=le.Error||[];se=s.isArray(se)?se:[se],Te=s.isArray(Te)?Te:[Te];var W=s.clone(le);s.extend(W,{Error:Te,Deleted:se,statusCode:K.statusCode,headers:K.headers}),a(null,W)})}function x(e,a){var r=e.Headers;if(!e.RestoreRequest){a(s.error(new Error("missing param RestoreRequest")));return}var u=e.RestoreRequest||{},v=s.json2xml({RestoreRequest:u});r["Content-Type"]="application/xml",r["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:v,action:"restore",headers:r,tracker:e.tracker},a)}function E(e,a){var r=e.Tagging||{},u=r.TagSet||r.Tags||e.Tags||[];u=s.clone(s.isArray(u)?u:[u]);var v=s.json2xml({Tagging:{TagSet:{Tag:u}}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:e.Bucket,Key:e.Key,Region:e.Region,body:v,action:"tagging",headers:g,VersionId:e.VersionId,tracker:e.tracker},function(y,m){if(y&&y.statusCode===204)return a(null,{statusCode:y.statusCode});if(y)return a(y);a(null,{statusCode:m.statusCode,headers:m.headers})})}function O(e,a){X.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:e.Key,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&(r.error==="Not Found"||r.error.Code==="NoSuchTagSet")){var v={Tags:[],statusCode:r.statusCode};r.headers&&(v.headers=r.headers),a(null,v)}else a(r);return}var g=[];try{g=u.Tagging.TagSet.Tag||[]}catch{}g=s.clone(s.isArray(g)?g:[g]),a(null,{Tags:g,statusCode:u.statusCode,headers:u.headers})})}function q(e,a){X.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return a(null,{statusCode:r.statusCode});if(r)return a(r);a(null,{statusCode:u.statusCode,headers:u.headers})})}function Q(e,a){var r=e.SelectType;if(!r)return a(s.error(new Error("missing param SelectType")));var u=e.SelectRequest||{},v=s.json2xml({SelectRequest:u}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"select",qs:{"select-type":e.SelectType},VersionId:e.VersionId,body:v,DataType:"arraybuffer",rawBody:!0,tracker:e.tracker},function(y,m){if(y&&y.statusCode===204)return a(null,{statusCode:y.statusCode});if(y)return a(y);var K=s.parseSelectPayload(m.body);a(null,{statusCode:m.statusCode,headers:m.headers,Body:K.body,Payload:K.payload})})}function ne(e,a){var r=this,u=e.Headers,v=e.tracker;!u["Cache-Control"]&&!u["cache-control"]&&(u["Cache-Control"]=""),!u["Content-Type"]&&!u["content-type"]&&(u["Content-Type"]=e.Body&&e.Body.type||"");var g=e.Body&&(e.UploadAddMetaMd5||r.options.UploadAddMetaMd5);g&&v&&v.setParams({md5StartTime:new Date().getTime()}),s.getBodyMd5(g,e.Body,function(y){y&&(e.Headers["x-cos-meta-md5"]=y),g&&v&&v.setParams({md5EndTime:new Date().getTime()}),X.call(r,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers,qs:e.Query,tracker:v},function(m,K){if(m)return v&&v.parent&&v.parent.setParams({errorNode:"multipartInit"}),a(m);if(K=s.clone(K||{}),K&&K.InitiateMultipartUploadResult)return a(null,s.extend(K.InitiateMultipartUploadResult,{statusCode:K.statusCode,headers:K.headers}));a(null,K)})},e.onHashProgress)}function fe(e,a){var r=this;s.getFileSize("multipartUpload",e,function(){var u=e.tracker,v=r.options.UploadCheckContentMd5;v&&u&&u.setParams({md5StartTime:new Date().getTime()}),s.getBodyMd5(v,e.Body,function(g){g&&(e.Headers["Content-MD5"]=s.b64(g)),v&&u&&u.setParams({md5EndTime:new Date().getTime()}),u&&u.setParams({partNumber:e.PartNumber}),X.call(r,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null,tracker:u},function(y,m){if(y)return u&&u.parent&&u.parent.setParams({errorNode:"multipartUpload"}),a(y);a(null,{ETag:s.attr(m.headers,"etag",""),statusCode:m.statusCode,headers:m.headers})})})})}function ve(e,a){for(var r=this,u=e.UploadId,v=e.Parts,g=e.tracker,y=0,m=v.length;y<m;y++)v[y].ETag&&v[y].ETag.indexOf('"')===0||(v[y].ETag='"'+v[y].ETag+'"');var K=s.json2xml({CompleteMultipartUpload:{Part:v}});K=K.replace(/\n\s*/g,"");var le=e.Headers;le["Content-Type"]="application/xml",le["Content-MD5"]=s.b64(s.md5(K)),X.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:u},body:K,headers:le,tracker:g},function(se,Te){if(se)return g&&g.parent&&g.parent.setParams({errorNode:"multipartComplete"}),a(se);var W=Ke({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0}),Se=Te.CompleteMultipartUploadResult||{};if(Se.ProcessResults&&(Se.UploadResult={OriginalInfo:{Key:Se.Key,Location:W,ETag:Se.ETag,ImageInfo:Se.ImageInfo},ProcessResults:Se.ProcessResults},delete Se.ImageInfo,delete Se.ProcessResults),Se.CallbackResult){var Fe=Se.CallbackResult;if(Fe.Status==="200"&&Fe.CallbackBody)try{Se.CallbackBody=JSON.parse(s.decodeBase64(Fe.CallbackBody))}catch{Se.CallbackBody={}}else Se.CallbackError=Fe.Error||{};delete Se.CallbackResult}if(Se.ReturnBodyResult){var Ue=Se.ReturnBodyResult;if(Ue.Status==="200"&&Ue.ReturnBody)try{Se.ReturnBody=JSON.parse(s.decodeBase64(Ue.ReturnBody))}catch{Se.ReturnBody={}}else Se.ReturnError={Code:Ue.Code,Message:Ue.Message,Status:Ue.Status};delete Se.ReturnBodyResult}var _e=s.extend(Se,{Location:W,statusCode:Te.statusCode,headers:Te.headers});a(null,_e)})}function Be(e,a){var r={};r.delimiter=e.Delimiter,r["encoding-type"]=e.EncodingType,r.prefix=e.Prefix||"",r["max-uploads"]=e.MaxUploads,r["key-marker"]=e.KeyMarker,r["upload-id-marker"]=e.UploadIdMarker,r=s.clearKey(r);var u=e.tracker;u&&u.setParams({signStartTime:new Date().getTime()}),X.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,action:"uploads",tracker:u},function(v,g){if(v)return u&&u.parent&&u.parent.setParams({errorNode:"multipartList"}),a(v);if(g&&g.ListMultipartUploadsResult){var y=g.ListMultipartUploadsResult.Upload||[];y=s.isArray(y)?y:[y],g.ListMultipartUploadsResult.Upload=y}var m=s.clone(g.ListMultipartUploadsResult||{});s.extend(m,{statusCode:g.statusCode,headers:g.headers}),a(null,m)})}function Ee(e,a){var r={},u=e.tracker;r.uploadId=e.UploadId,r["encoding-type"]=e.EncodingType,r["max-parts"]=e.MaxParts,r["part-number-marker"]=e.PartNumberMarker,X.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,tracker:u},function(v,g){if(v)return u&&u.parent&&u.parent.setParams({errorNode:"multipartListPart"}),a(v);var y=g.ListPartsResult||{},m=y.Part||[];m=s.isArray(m)?m:[m],y.Part=m;var K=s.clone(y);s.extend(K,{statusCode:g.statusCode,headers:g.headers}),a(null,K)})}function we(e,a){var r={};r.uploadId=e.UploadId,X.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,tracker:e.tracker},function(u,v){if(u)return a(u);a(null,{statusCode:v.statusCode,headers:v.headers})})}function Pe(e,a){X.call(this,{method:e.Method,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:e.Action,headers:e.Headers,qs:e.Query,body:e.Body,Url:e.Url,rawBody:e.RawBody,DataType:e.DataType,tracker:e.tracker},function(r,u){if(r)return a(r);u&&u.body&&(u.Body=u.body,delete u.body),a(r,u)})}function Le(e,a){var r=e.Headers;!r["Cache-Control"]&&!r["cache-control"]&&(r["Cache-Control"]=""),!r["Content-Type"]&&!r["content-type"]&&(r["Content-Type"]=e.Body&&e.Body.type||""),X.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:e.Bucket,Region:e.Region,action:"append",Key:e.Key,body:e.Body,qs:{position:e.Position},headers:e.Headers,tracker:e.tracker},function(u,v){if(u)return a(u);a(null,v)})}function Je(e){var a=this;return s.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Bucket:e.Bucket,Region:e.Region,Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:a.options.UseRawKey,SystemClockOffset:a.options.SystemClockOffset})}function Ve(e,a){var r=this,u=e.UseAccelerate===void 0?r.options.UseAccelerate:e.UseAccelerate,v=Ke({ForcePathStyle:r.options.ForcePathStyle,protocol:e.Protocol||r.options.Protocol,domain:e.Domain||r.options.Domain,bucket:e.Bucket,region:u?"accelerate":e.Region,object:e.Key}),g="";e.Query&&(g+=s.obj2str(e.Query)),e.QueryString&&(g+=(g?"&":"")+e.QueryString);var y=v;if(e.Sign!==void 0&&!e.Sign)return g&&(y+="?"+g),a(null,{Url:y}),y;var m=Ye.call(this,{Bucket:e.Bucket,Region:e.Region,UseAccelerate:e.UseAccelerate,Url:v}),K=nt.call(this,{Action:(e.Method||"").toUpperCase()==="PUT"?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires,Headers:e.Headers,Query:e.Query,SignHost:m,ForceSignHost:e.ForceSignHost===!1?!1:r.options.ForceSignHost},function(le,se){if(a){if(le){a(le);return}var Te=function(Fe){var Ue=Fe.match(/q-url-param-list.*?(?=&)/g)[0],_e="q-url-param-list="+encodeURIComponent(Ue.replace(/q-url-param-list=/,"")).toLowerCase(),He=new RegExp(Ue,"g"),Ge=Fe.replace(He,_e);return Ge},W=v;W+="?"+(se.Authorization.indexOf("q-signature")>-1?Te(se.Authorization):"sign="+encodeURIComponent(se.Authorization)),se.SecurityToken&&(W+="&x-cos-security-token="+se.SecurityToken),se.ClientIP&&(W+="&clientIP="+se.ClientIP),se.ClientUA&&(W+="&clientUA="+se.ClientUA),se.Token&&(W+="&token="+se.Token),g&&(W+="&"+g),setTimeout(function(){a(null,{Url:W})})}});return K?(y+="?"+K.Authorization+(K.SecurityToken?"&x-cos-security-token="+K.SecurityToken:""),g&&(y+="&"+g)):g&&(y+="?"+g),y}function xe(e){var a={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},r={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},u=e&&e.AccessControlList||{},v=u.Grant;v&&(v=s.isArray(v)?v:[v]);var g={READ:0,WRITE:0,FULL_CONTROL:0};return v&&v.length&&s.each(v,function(y){var m=y.Grantee.URI&&y.Grantee.URI.endsWith("/groups/global/AllUsers");y.Grantee.ID==="qcs::cam::anyone:anyone"||m?g[y.Permission]=1:y.Grantee.ID!==e.Owner.ID&&a[r[y.Permission]].push('id="'+y.Grantee.ID+'"')}),g.FULL_CONTROL||g.WRITE&&g.READ?a.ACL="public-read-write":g.READ?a.ACL="public-read":a.ACL="private",s.each(r,function(y){a[y]=qe(a[y].join(","))}),a}function qe(e){var a=e.split(","),r={},u,v;for(u=0;u<a.length;)v=a[u].trim(),r[v]?a.splice(u,1):(r[v]=!0,a[u]=v,u++);return a.join(",")}function Ke(e){var a=e.region||"",r=e.bucket||"",u=r.substr(0,r.lastIndexOf("-")),v=r.substr(r.lastIndexOf("-")+1),g=e.domain,y=e.object;typeof g=="function"&&(g=g({Bucket:r,Region:a})),["http","https"].includes(e.protocol)&&(e.protocol=e.protocol+":");var m=e.protocol||(s.isBrowser&&(typeof location>"u"?"undefined":M(location))==="object"&&location.protocol==="http:"?"http:":"https:");g||(["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(a)>-1?g="{Region}.myqcloud.com":g="cos.{Region}.myqcloud.com",e.ForcePathStyle||(g="{Bucket}."+g)),g=g.replace(/\{\{AppId\}\}/gi,v).replace(/\{\{Bucket\}\}/gi,u).replace(/\{\{Region\}\}/gi,a).replace(/\{\{.*?\}\}/gi,""),g=g.replace(/\{AppId\}/gi,v).replace(/\{BucketName\}/gi,u).replace(/\{Bucket\}/gi,r).replace(/\{Region\}/gi,a).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(g)||(g=m+"//"+g),g.slice(-1)==="/"&&(g=g.slice(0,-1));var K=g;return e.ForcePathStyle&&(K+="/"+r),K+="/",y&&(K+=s.camSafeUrlEncode(y).replace(/%2F/g,"/")),e.isLocation&&(K=K.replace(/^https?:\/\//,"")),K}var Ye=function(a){if(!a.Bucket||!a.Region)return"";var r=a.UseAccelerate===void 0?this.options.UseAccelerate:a.UseAccelerate,u=a.Url||Ke({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:a.Bucket,region:r?"accelerate":a.Region}),v=u.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");return v};function nt(e,a){var r=s.clone(e.Headers),u="";s.each(r,function(Ae,Ce){(Ae===""||["content-type","cache-control","expires"].indexOf(Ce.toLowerCase())>-1)&&delete r[Ce],Ce.toLowerCase()==="host"&&(u=Ae)});var v=e.ForceSignHost!==!1;!u&&e.SignHost&&v&&(r.Host=e.SignHost);var g=!1,y=function(Ce,pe){g||(g=!0,pe&&pe.XCosSecurityToken&&!pe.SecurityToken&&(pe=s.clone(pe),pe.SecurityToken=pe.XCosSecurityToken,delete pe.XCosSecurityToken),a&&a(Ce,pe))},m=this,K=e.Bucket||"",le=e.Region||"",se=e.Key||"";m.options.ForcePathStyle&&K&&(se=K+"/"+se);var Te="/"+se,W={},Se=e.Scope;if(!Se){var Fe=e.Action||"",Ue=e.ResourceKey||e.Key||"";Se=e.Scope||[{action:Fe,bucket:K,region:le,prefix:Ue}]}var _e=s.md5(JSON.stringify(Se));m._StsCache=m._StsCache||[],function(){var Ae,Ce;for(Ae=m._StsCache.length-1;Ae>=0;Ae--){Ce=m._StsCache[Ae];var pe=Math.round(s.getSkewTime(m.options.SystemClockOffset)/1e3)+30;if(Ce.StartTime&&pe<Ce.StartTime||pe>=Ce.ExpiredTime){m._StsCache.splice(Ae,1);continue}if(!Ce.ScopeLimit||Ce.ScopeLimit&&Ce.ScopeKey===_e){W=Ce;break}}}();var He=function(){var Ce="";W.StartTime&&e.Expires?Ce=W.StartTime+";"+(W.StartTime+e.Expires*1):W.StartTime&&W.ExpiredTime&&(Ce=W.StartTime+";"+W.ExpiredTime);var pe=s.getAuth({SecretId:W.TmpSecretId,SecretKey:W.TmpSecretKey,Method:e.Method,Pathname:Te,Query:e.Query,Headers:r,Expires:e.Expires,UseRawKey:m.options.UseRawKey,SystemClockOffset:m.options.SystemClockOffset,KeyTime:Ce,ForceSignHost:v}),be={Authorization:pe,SecurityToken:W.SecurityToken||W.XCosSecurityToken||"",Token:W.Token||"",ClientIP:W.ClientIP||"",ClientUA:W.ClientUA||"",SignFrom:"client"};y(null,be)},Ge=function(Ce){if(Ce.Authorization){var pe=!1,be=Ce.Authorization;if(be)if(be.indexOf(" ")>-1)pe=!1;else if(be.indexOf("q-sign-algorithm=")>-1&&be.indexOf("q-ak=")>-1&&be.indexOf("q-sign-time=")>-1&&be.indexOf("q-key-time=")>-1&&be.indexOf("q-url-param-list=")>-1)pe=!0;else try{be=atob(be),be.indexOf("a=")>-1&&be.indexOf("k=")>-1&&be.indexOf("t=")>-1&&be.indexOf("r=")>-1&&be.indexOf("b=")>-1&&(pe=!0)}catch{}if(!pe)return s.error(new Error("getAuthorization callback params format error"))}else{if(!Ce.TmpSecretId)return s.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!Ce.TmpSecretKey)return s.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!Ce.SecurityToken&&!Ce.XCosSecurityToken)return s.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!Ce.ExpiredTime)return s.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(Ce.ExpiredTime&&Ce.ExpiredTime.toString().length!==10)return s.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(Ce.StartTime&&Ce.StartTime.toString().length!==10)return s.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(W.ExpiredTime&&W.ExpiredTime-s.getSkewTime(m.options.SystemClockOffset)/1e3>60)He();else if(m.options.getAuthorization)m.options.getAuthorization.call(m,{Bucket:K,Region:le,Method:e.Method,Key:se,Pathname:Te,Query:e.Query,Headers:r,Scope:Se,SystemClockOffset:m.options.SystemClockOffset,ForceSignHost:v},function(Ae){typeof Ae=="string"&&(Ae={Authorization:Ae});var Ce=Ge(Ae);if(Ce)return y(Ce);Ae.Authorization?y(null,Ae):(W=Ae||{},W.Scope=Se,W.ScopeKey=_e,m._StsCache.push(W),He())});else if(m.options.getSTS)m.options.getSTS.call(m,{Bucket:K,Region:le},function(Ae){W=Ae||{},W.Scope=Se,W.ScopeKey=_e,W.TmpSecretId||(W.TmpSecretId=W.SecretId),W.TmpSecretKey||(W.TmpSecretKey=W.SecretKey);var Ce=Ge(W);if(Ce)return y(Ce);m._StsCache.push(W),He()});else return function(){var Ae="";if(m.options.StartTime&&e.Expires){if(m.options.StartTime.toString().length!==10)return y(s.error(new Error('params "StartTime" should be 10 digits')));Ae=m.options.StartTime+";"+(m.options.StartTime+e.Expires*1)}else if(m.options.StartTime&&m.options.ExpiredTime){if(m.options.StartTime.toString().length!==10)return y(s.error(new Error('params "StartTime" should be 10 digits')));if(m.options.ExpiredTime.toString().length!==10)return y(s.error(new Error('params "ExpiredTime" should be 10 digits')));Ae=m.options.StartTime+";"+m.options.ExpiredTime*1}var Ce=s.getAuth({SecretId:e.SecretId||m.options.SecretId,SecretKey:e.SecretKey||m.options.SecretKey,Method:e.Method,Pathname:Te,Query:e.Query,Headers:r,Expires:e.Expires,KeyTime:Ae,UseRawKey:m.options.UseRawKey,SystemClockOffset:m.options.SystemClockOffset,ForceSignHost:v}),pe={Authorization:Ce,SecurityToken:m.options.SecurityToken||m.options.XCosSecurityToken,SignFrom:"client"};return y(null,pe),pe}();return""}function dt(e){var a=this,r=!1,u=!1,v=!1,g=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var y=e.error.Code,m=e.error.Message;(y==="RequestTimeTooSkewed"||y==="AccessDenied"&&m==="Request has expired")&&(u=!0)}catch{}if(e)if(u&&g){var K=Date.parse(g);this.options.CorrectClockSkew&&Math.abs(s.getSkewTime(this.options.SystemClockOffset)-K)>=3e4&&(this.options.SystemClockOffset=K-Date.now(),r=!0)}else Math.floor(e.statusCode/100)===5?r=!0:e.message==="CORS blocked or network error"&&(v=!0,r=a.options.AutoSwitchHost);return{canRetry:r,networkError:v}}function ft(e){var a=e.requestUrl,r=e.clientCalcSign,u=e.networkError;if(!this.options.AutoSwitchHost||!a||!r||!u)return!1;var v=/^https?:\/\/[^\/]*\.cos\.[^\/]*\.myqcloud\.com(\/.*)?$/,g=/^https?:\/\/[^\/]*\.cos\.accelerate\.myqcloud\.com(\/.*)?$/,y=v.test(a)&&!g.test(a);return y}function X(e,a){var r=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=s.clearKey(e.qs),e.headers&&(e.headers=s.clearKey(e.headers)),e.qs&&(e.qs=s.clearKey(e.qs));var u=s.clone(e.qs);e.action&&(u[e.action]="");var v=e.url||e.Url,g=e.SignHost||Ye.call(this,{Bucket:e.Bucket,Region:e.Region,Url:v}),y=e.tracker,m=function K(le){var se=r.options.SystemClockOffset;y&&y.setParams({signStartTime:new Date().getTime(),httpRetryTimes:le-1}),e.SwitchHost&&(g=g.replace(/myqcloud.com/,"tencentcos.cn")),nt.call(r,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:u,Headers:e.headers,SignHost:g,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope,ForceSignHost:r.options.ForceSignHost,SwitchHost:e.SwitchHost},function(Te,W){if(Te){a(Te);return}y&&y.setParams({signEndTime:new Date().getTime(),httpStartTime:new Date().getTime()}),e.AuthData=W,ht.call(r,e,function(Se,Fe){y&&y.setParams({httpEndTime:new Date().getTime()});var Ue=!1,_e=!1;if(Se){var He=dt.call(r,Se);Ue=He.canRetry||se!==r.options.SystemClockOffset,_e=He.networkError}if(Se&&le<2&&Ue){e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,e.headers["x-cos-security-token"]&&delete e.headers["x-cos-security-token"],e.headers["x-ci-security-token"]&&delete e.headers["x-ci-security-token"]);var Ge=ft.call(r,{requestUrl:(Se==null?void 0:Se.url)||"",clientCalcSign:W.SignFrom==="client",networkError:_e});e.SwitchHost=Ge,e.retry=!0,K(le+1)}else a(Se,Fe)})})};m(1)}function ht(e,a){var r=this,u=e.TaskId;if(!(u&&!r._isRunningTask(u))){var v=e.Bucket,g=e.Region,y=e.Key,m=e.method||"GET",K=e.Url||e.url,le=e.body,se=e.rawBody;r.options.UseAccelerate&&(g="accelerate"),K=K||Ke({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:v,region:g,object:y}),e.SwitchHost&&(K=K.replace(/myqcloud.com/,"tencentcos.cn"));var Te=y?K:"";e.action&&(K=K+"?"+(s.isIOS_QQ?"".concat(e.action,"="):e.action)),e.qsStr&&(K.indexOf("?")>-1?K=K+"&"+e.qsStr:K=K+"?"+e.qsStr);var W={method:m,url:K,headers:e.headers,qs:e.qs,body:le},Se="x-cos-security-token";if(s.isCIHost(K)&&(Se="x-ci-security-token"),W.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(W.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(W.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(W.headers.clientUA=e.AuthData.ClientUA),e.AuthData.SecurityToken&&(W.headers[Se]=e.AuthData.SecurityToken),e.Action&&(W.action=e.Action),W.key=e.Key||e.ResourceKey,W.headers&&(W.headers=s.clearKey(W.headers)),e.retry&&(W.headers["x-cos-sdk-retry"]=!0),W=s.clearKey(W),e.onProgress&&typeof e.onProgress=="function"){var Fe=le&&(le.size||le.length)||0;W.onProgress=function(pe){if(!(u&&!r._isRunningTask(u))){var be=pe?pe.loaded:0;e.onProgress({loaded:be,total:Fe})}}}e.onDownloadProgress&&(W.onDownloadProgress=e.onDownloadProgress),e.DataType&&(W.dataType=e.DataType),this.options.Timeout&&(W.timeout=this.options.Timeout),r.options.ForcePathStyle&&(W.pathStyle=r.options.ForcePathStyle),r.emit("before-send",W);var Ue=W.url.includes("accelerate."),_e=W.qs?Object.keys(W.qs).map(function(pe){return"".concat(pe,"=").concat(W.qs[pe])}).join("&"):"",He=_e?W.url+"?"+_e:W.url;if(e.tracker){var Ge;e.tracker.setParams({url:He,httpMethod:W.method,accelerate:Ue,httpSize:((Ge=W.body)===null||Ge===void 0?void 0:Ge.size)||0}),e.tracker.parent&&!e.tracker.parent.params.url&&e.tracker.parent.setParams({url:Te,accelerate:Ue})}var Ae=(r.options.Request||U)(W,function(pe){if(!(pe&&pe.error==="abort")){var be={options:W,error:pe&&pe.error,statusCode:pe&&pe.statusCode||0,statusMessage:pe&&pe.statusMessage||"",headers:pe&&pe.headers||{},body:pe&&pe.body};r.emit("after-receive",be);var gt=be.error,rt=be.body,Qe={statusCode:be.statusCode,statusMessage:be.statusMessage,headers:be.headers},Ct,Xe=function(Ze,Ie){if(u&&r.off("inner-kill-task",Ce),!Ct){Ct=!0;var et={};if(Qe&&Qe.statusCode&&(et.statusCode=Qe.statusCode),Qe&&Qe.headers&&(et.headers=Qe.headers),Ze)W.url&&(et.url=W.url),W.method&&(et.method=W.method),Ze=s.extend(Ze||{},et),a(Ze,null);else{if(e.Action==="name/cos:PutObject"){var pt={};for(var Tt in e.headers){var mt=Tt.toLowerCase();pt[mt]=e.headers[Tt]}pt["x-cos-callback"]?Ie.Error?(Ie.CallbackError=s.clone(Ie.Error),delete Ie.Error):Ie.CallbackBody=s.clone(Ie):pt["x-cos-return-body"]&&(Ie.Error?(Ie.ReturnError=s.clone(Ie.Error),delete Ie.Error):Ie.ReturnBody=s.clone(Ie))}Ie=s.extend(Ie||{},et),a(null,Ie)}Ae=null}};if(gt)return Xe(s.error(gt));var ot=Qe.statusCode,kt=Math.floor(ot/100)===2;if(se){if(kt)return Xe(null,{body:rt});if(rt instanceof Blob){s.readAsBinaryString(rt,function(St){var Ze=s.parseResBody(St),Ie=Ze.Error||Ze;return Xe(s.error(new Error(Ie.Message||"response body error"),{code:Ie.Code,error:Ie}))});return}}var vt=s.parseResBody(rt),it=vt.Error||vt;kt?Xe(null,vt):it?Xe(s.error(new Error(it.Message),{code:it.Code,error:it})):ot?Xe(s.error(new Error(Qe.statusMessage),{code:""+ot})):ot&&Xe(s.error(new Error("statusCode error")))}}),Ce=function pe(be){be.TaskId===u&&(Ae&&Ae.abort&&Ae.abort(),r.off("inner-kill-task",pe))};u&&r.on("inner-kill-task",Ce)}}var yt={getService:L,putBucket:P,headBucket:_,getBucket:C,deleteBucket:d,putBucketAcl:T,getBucketAcl:h,putBucketCors:k,getBucketCors:A,deleteBucketCors:B,getBucketLocation:w,getBucketPolicy:H,putBucketPolicy:N,deleteBucketPolicy:D,putBucketTagging:f,getBucketTagging:l,deleteBucketTagging:S,putBucketLifecycle:i,getBucketLifecycle:t,deleteBucketLifecycle:n,putBucketVersioning:o,getBucketVersioning:c,putBucketReplication:p,getBucketReplication:b,deleteBucketReplication:R,putBucketWebsite:j,getBucketWebsite:F,deleteBucketWebsite:J,putBucketReferer:$,getBucketReferer:Y,putBucketDomain:te,getBucketDomain:he,deleteBucketDomain:ue,putBucketOrigin:ie,getBucketOrigin:Z,deleteBucketOrigin:G,putBucketLogging:ee,getBucketLogging:de,putBucketInventory:re,postBucketInventory:oe,getBucketInventory:ye,listBucketInventory:ge,deleteBucketInventory:ke,putBucketAccelerate:me,getBucketAccelerate:Re,putBucketEncryption:Oe,getBucketEncryption:ze,deleteBucketEncryption:Me,getObject:je,headObject:De,listObjectVersions:$e,putObject:We,deleteObject:tt,getObjectAcl:ut,putObjectAcl:ct,optionsObject:at,putObjectCopy:lt,deleteMultipleObject:z,restoreObject:x,putObjectTagging:E,getObjectTagging:O,deleteObjectTagging:q,selectObjectContent:Q,appendObject:Le,uploadPartCopy:Ne,multipartInit:ne,multipartUpload:fe,multipartComplete:ve,multipartList:Be,multipartListPart:Ee,multipartAbort:we,request:Pe,getObjectUrl:Ve,getAuth:Je};function Bt(e,a,r){s.each(["Cors","Acl"],function(u){if(e.slice(-u.length)===u){var v=e.slice(0,-u.length)+u.toUpperCase(),g=s.apiWrapper(e,a),y=!1;r[v]=function(){y=!0,g.apply(this,arguments)}}})}V.exports.init=function(e,a){a.transferToTaskMethod(yt,"putObject"),s.each(yt,function(r,u){e.prototype[u]=s.apiWrapper(u,r),Bt(u,r,e.prototype)})}},"./src/cos.js":function(V,ae,I){var M=I("./src/util.js"),U=I("./src/event.js"),s=I("./src/task.js"),L=I("./src/base.js"),P=I("./src/advance.js"),_=I("./package.json"),C={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",StartTime:0,ExpiredTime:0,ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1024*1024,SliceSize:1024*1024,CopyChunkParallelLimit:20,CopyChunkSize:1024*1024*10,CopySliceSize:1024*1024*10,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,AutoSwitchHost:!0,CopySourceParser:null,ObjectKeySimplifyCheck:!0,DeepTracker:!1,TrackerDelay:5e3,CustomId:"",BeaconReporter:null,ClsReporter:null},d=function(h){if(this.options=M.extend(M.clone(C),h||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1024*1024,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1024*1024,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.EnableReporter=this.options.BeaconReporter||this.options.ClsReporter,this.options.AppId,this.options.SecretId&&this.options.SecretId.indexOf(" ")>-1,this.options.SecretKey&&this.options.SecretKey.indexOf(" ")>-1,M.isNode(),this.options.ForcePathStyle)throw new Error("ForcePathStyle is not supported");U.init(this),s.init(this)};L.init(d,s),P.init(d,s),d.util={md5:M.md5,xml2json:M.xml2json,json2xml:M.json2xml,encodeBase64:M.encodeBase64},d.getAuthorization=M.getAuth,d.version=_.version,V.exports=d},"./src/event.js":function(V,ae){var I=function(s){var L={},P=function(C){return!L[C]&&(L[C]=[]),L[C]};s.on=function(_,C){P(_).push(C)},s.off=function(_,C){for(var d=P(_),T=d.length-1;T>=0;T--)C===d[T]&&d.splice(T,1)},s.emit=function(_,C){for(var d=P(_).map(function(h){return h}),T=0;T<d.length;T++)d[T](C)}},M=function(){I(this)};V.exports.init=I,V.exports.EventProxy=M},"./src/session.js":function(V,ae,I){var M=I("./src/util.js"),U="cos_sdk_upload_cache",s=30*24*3600,L,P,_=function(){try{var A=JSON.parse(localStorage.getItem(U))}catch{}A||(A=[]),L=A},C=function(){try{L.length?localStorage.setItem(U,JSON.stringify(L)):localStorage.removeItem(U)}catch{}},d=function(){if(!L){_.call(this);for(var A=!1,B=Math.round(Date.now()/1e3),w=L.length-1;w>=0;w--){var N=L[w][2];(!N||N+s<B)&&(L.splice(w,1),A=!0)}A&&C()}},T=function(){P||(P=setTimeout(function(){C(),P=null},400))},h={using:{},setUsing:function(A){h.using[A]=!0},removeUsing:function(A){delete h.using[A]},getFileId:function(A,B,w,N){return A.name&&A.size&&A.lastModifiedDate&&B?M.md5([A.name,A.size,A.lastModifiedDate,B,w,N].join("::")):null},getCopyFileId:function(A,B,w,N,H){var D=B["content-length"],f=B.etag||"",l=B["last-modified"];return A&&w?M.md5([A,D,f,l,w,N,H].join("::")):null},getUploadIdList:function(A){if(!A)return null;d.call(this);for(var B=[],w=0;w<L.length;w++)L[w][0]===A&&B.push(L[w][1]);return B.length?B:null},saveUploadId:function(A,B,w){if(d.call(this),!!A){for(var N=L.length-1;N>=0;N--){var H=L[N];H[0]===A&&H[1]===B&&L.splice(N,1)}L.unshift([A,B,Math.round(Date.now()/1e3)]),L.length>w&&L.splice(w),T()}},removeUploadId:function(A){d.call(this),delete h.using[A];for(var B=L.length-1;B>=0;B--)L[B][1]===A&&L.splice(B,1);T()}};V.exports=h},"./src/task.js":function(V,ae,I){var M=I("./src/session.js"),U=I("./src/util.js"),s={},L=function(C,d){s[d]=C[d],C[d]=function(T,h){T.SkipTask?s[d].call(this,T,h):this._addTask(d,T,h)}},P=function(C){var d=[],T={},h=0,k=0,A=function(l){var S={id:l.id,Bucket:l.Bucket,Region:l.Region,Key:l.Key,FilePath:l.FilePath,state:l.state,loaded:l.loaded,size:l.size,speed:l.speed,percent:l.percent,hashPercent:l.hashPercent,error:l.error};return l.FilePath&&(S.FilePath=l.FilePath),l._custom&&(S._custom=l._custom),S},B=function(){var f,l=function(){f=0,C.emit("task-list-update",{list:U.map(d,A)}),C.emit("list-update",{list:U.map(d,A)})};return function(){f||(f=setTimeout(l))}}(),w=function(){if(!(d.length<=C.options.UploadQueueSize)){for(var l=0;l<k&&l<d.length&&d.length>C.options.UploadQueueSize;){var S=d[l].state==="waiting"||d[l].state==="checking"||d[l].state==="uploading";!d[l]||!S?(T[d[l].id]&&delete T[d[l].id],d.splice(l,1),k--):l++}B()}},N=function f(){if(!(h>=C.options.FileParallelLimit)){for(;d[k]&&d[k].state!=="waiting";)k++;if(!(k>=d.length)){var l=d[k];k++,h++,l.state="checking",l.params.onTaskStart&&l.params.onTaskStart(A(l)),!l.params.UploadData&&(l.params.UploadData={});var S=U.formatParams(l.api,l.params);s[l.api].call(C,S,function(i,t){C._isRunningTask(l.id)&&((l.state==="checking"||l.state==="uploading")&&(l.state=i?"error":"success",i&&(l.error=i),h--,B(),f(),l.callback&&l.callback(i,t),l.state==="success"&&(l.params&&(delete l.params.UploadData,delete l.params.Body,delete l.params),delete l.callback)),w())}),B(),setTimeout(f)}}},H=function(l,S){var i=T[l];if(i){var t=i&&i.state==="waiting",n=i&&(i.state==="checking"||i.state==="uploading");if(S==="canceled"&&i.state!=="canceled"||S==="paused"&&t||S==="paused"&&n){i.state=S,C.emit("inner-kill-task",{TaskId:l,toState:S});try{var o=i&&i.params&&i.params.UploadData.UploadId}catch{}S==="canceled"&&o&&M.removeUsing(o),B(),n&&(h--,N()),S==="canceled"&&(i.params&&(delete i.params.UploadData,delete i.params.Body,delete i.params),delete i.callback)}w()}};C._addTasks=function(f){U.each(f,function(l){C._addTask(l.api,l.params,l.callback,!0)}),B()};var D=!0;C._addTask=function(f,l,S,i){l=U.formatParams(f,l);var t=U.uuid();l.TaskId=t,l.onTaskReady&&l.onTaskReady(t),l.TaskReady&&(l.TaskReady(t),D=!1);var n={params:l,callback:S,api:f,index:d.length,id:t,Bucket:l.Bucket,Region:l.Region,Key:l.Key,FilePath:l.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:l._custom},o=l.onHashProgress;l.onHashProgress=function(p){C._isRunningTask(n.id)&&(n.hashPercent=p.percent,o&&o(p),B())};var c=l.onProgress;return l.onProgress=function(p){C._isRunningTask(n.id)&&(n.state==="checking"&&(n.state="uploading"),n.loaded=p.loaded,n.speed=p.speed,n.percent=p.percent,c&&c(p),B())},U.getFileSize(f,l,function(p,b){if(p)return S(U.error(p));T[t]=n,d.push(n),n.size=b,!i&&B(),N(),w()}),t},C._isRunningTask=function(f){var l=T[f];return!!(l&&(l.state==="checking"||l.state==="uploading"))},C.getTaskList=function(){return U.map(d,A)},C.cancelTask=function(f){H(f,"canceled")},C.pauseTask=function(f){H(f,"paused")},C.restartTask=function(f){var l=T[f];l&&(l.state==="paused"||l.state==="error")&&(l.state="waiting",B(),k=Math.min(k,l.index),N())},C.isUploadRunning=function(){return h||k<d.length}};V.exports.transferToTaskMethod=L,V.exports.init=P},"./src/tracker.js":function(V,ae,I){var M=I("./node_modules/@babel/runtime/helpers/classCallCheck.js"),U=I("./node_modules/@babel/runtime/helpers/createClass.js"),s=I("./node_modules/@babel/runtime/helpers/typeof.js"),L=I("./package.json"),P=null,_=function(S,i){if(!P){if(typeof S!="function")throw new Error("Beacon not found");P=new S({appkey:"0WEB05PY6MHRGK0U",versionCode:L.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:i,sessionDuration:60*1e3})}return P},C=function(S){return!S||S<0?0:(S/1e3).toFixed(3)},d={getUid:function(){var S=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return S()+S()+"-"+S()+"-"+S()+"-"+S()+"-"+S()+S()+S()},getNetType:function(){if((typeof navigator>"u"?"undefined":s(navigator))==="object"){var S=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(S==null?void 0:S.type)||(S==null?void 0:S.effectiveType)||"unknown"}return"unknown"},getProtocol:function(){return(typeof location>"u"?"undefined":s(location))==="object"?location.protocol.replace(/:/,""):"unknown protocol"},getOsType:function(){if((typeof navigator>"u"?"undefined":s(navigator))!=="object")return"unknown os";var S=navigator.userAgent.toLowerCase(),i=/macintosh|mac os x/i.test(navigator.userAgent);return S.indexOf("win32")>=0||S.indexOf("wow32")>=0?"win32":S.indexOf("win64")>=0||S.indexOf("wow64")>=0?"win64":i?"mac":"unknown os"},isMobile:function(){var S=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i;return!!((typeof navigator>"u"?"undefined":s(navigator))==="object"&&navigator.userAgent.match(S))},isAndroid:function(){var S=/(Android|Adr|Linux)/i;return!!((typeof navigator>"u"?"undefined":s(navigator))==="object"&&navigator.userAgent.match(S))},isIOS:function(){var S=/(iPhone|iPod|iPad|iOS)/i;return!!((typeof navigator>"u"?"undefined":s(navigator))==="object"&&navigator.userAgent.match(S))},isOtherMobile:function(){return T&&!isAndroid&&!isIOS},getUA:function(){if((typeof navigator>"u"?"undefined":s(navigator))!=="object")return"unknown device";var S=navigator.userAgent;return S}},T=d.isMobile(),h=d.isAndroid()?"android":d.isIOS?"ios":"other_mobile",k=d.getOsType(),A=T?h:k,B=d.getUA(),w=d.getProtocol(),N=function(S){return["putObject","sliceUploadFile","uploadFile","uploadFiles"].includes(S)?"UploadTask":S==="getObject"?"DownloadTask":["putObjectCopy","sliceCopyFile"].includes(S)?"CopyTask":S};function H(l){return l.replace(/([A-Z])/g,"_$1").toLowerCase()}function D(l){var S={},i=["sdkVersionName","sdkVersionCode","osName","networkType","requestName","requestResult","bucket","region","appid","accelerate","url","host","requestPath","userAgent","networkProtocol","httpMethod","httpSize","httpSpeed","httpTookTime","httpMd5","httpSign","httpFullTime","httpDomain","partNumber","httpRetryTimes","customId","traceId","realApi"],t=[].concat(i,["errorNode","errorCode","errorName","errorMessage","errorRequestId","errorHttpCode","errorServiceName","errorType","fullError"]),n=l.requestResult==="Success"?i:t;for(var o in l)if(n.includes(o)){var c=H(o);S[c]=l[o]}return S.request_name=l.realApi?N(l.realApi):l.requestName,S}var f=function(){function l(S){M(this,l);var i=S.parent,t=S.traceId,n=S.bucket,o=S.region,c=S.apiName,p=S.realApi,b=S.httpMethod,R=S.fileKey,j=S.fileSize,F=S.accelerate,J=S.customId,$=S.delay,Y=S.deepTracker,te=S.Beacon,he=S.clsReporter,ue=n&&n.substr(n.lastIndexOf("-")+1)||"";this.parent=i,this.deepTracker=Y,this.delay=$,he&&!this.clsReporter&&(this.clsReporter=he),this.params={sdkVersionName:"cos-js-sdk-v5",sdkVersionCode:L.version,osName:A,networkType:"",requestName:c||"",requestResult:"",realApi:p,bucket:n,region:o,accelerate:F,httpMethod:b,url:"",host:"",httpDomain:"",requestPath:R||"",userAgent:B,networkProtocol:w,errorType:"",errorCode:"",errorName:"",errorMessage:"",errorRequestId:"",errorHttpCode:0,errorServiceName:"",errorNode:"",httpTookTime:0,httpSize:j||0,httpMd5:0,httpSign:0,httpFullTime:0,httpSpeed:0,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:new Date().getTime(),endTime:0,traceId:t||d.getUid(),appid:ue,partNumber:0,httpRetryTimes:0,customId:J||"",partTime:0},te&&(this.beacon=_(te,$))}return U(l,[{key:"formatResult",value:function(i,t){var n,o,c,p,b,R,j=new Date().getTime(),F=d.getNetType(),J=i?(i==null?void 0:i.code)||(i==null||(n=i.error)===null||n===void 0?void 0:n.code)||(i==null||(o=i.error)===null||o===void 0?void 0:o.Code):"",$=i?(i==null?void 0:i.message)||(i==null||(c=i.error)===null||c===void 0?void 0:c.message)||(i==null||(p=i.error)===null||p===void 0?void 0:p.Message):"",Y=$,te=i?(i==null?void 0:i.resource)||(i==null||(b=i.error)===null||b===void 0?void 0:b.resource)||(i==null||(R=i.error)===null||R===void 0?void 0:R.Resource):"",he=i?i==null?void 0:i.statusCode:t.statusCode,ue=i?(i==null?void 0:i.headers)&&(i==null?void 0:i.headers["x-cos-request-id"]):(t==null?void 0:t.headers)&&(t==null?void 0:t.headers["x-cos-request-id"]),ie=i?ue?"Server":"Client":"";this.params.requestName==="getObject"&&(this.params.httpSize=t?t.headers&&t.headers["content-length"]:0);var Z=this.params.realApi==="sliceUploadFile",G=this.params.realApi==="sliceCopyFile";if(Z||G){var ee=this.params.httpSize/1024/this.params.partTime;Object.assign(this.params,{httpSpeed:ee<0?0:ee.toFixed(3)})}else{var de=j-this.params.startTime,ce=this.params.httpEndTime-this.params.httpStartTime,re=this.params.httpSize/1024/(ce/1e3),oe=this.params.md5EndTime-this.params.md5StartTime,ye=this.params.signEndTime-this.params.signStartTime;this.parent&&(this.parent.addParamValue("httpTookTime",C(ce)),this.parent.addParamValue("httpFullTime",C(de)),this.parent.addParamValue("httpMd5",C(oe)),this.parent.addParamValue("httpSign",C(ye)),["multipartUpload","uploadPartCopy","putObjectCopy"].includes(this.params.requestName)&&this.parent.addParamValue("partTime",C(ce))),Object.assign(this.params,{httpFullTime:C(de),httpMd5:C(oe),httpSign:C(ye),httpTookTime:C(ce),httpSpeed:re<0?0:re.toFixed(3)})}if(Object.assign(this.params,{networkType:F,requestResult:i?"Failure":"Success",errorType:ie,errorCode:J,errorHttpCode:he,errorName:Y,errorMessage:$,errorServiceName:te,errorRequestId:ue}),i&&(!J||!$)&&(this.params.fullError=i?JSON.stringify(i):""),this.params.url){try{var ge=/^http(s)?:\/\/(.*?)\//.exec(this.params.url);this.params.host=ge[2]}catch{this.params.host=this.params.url}this.params.httpDomain=this.params.host}}},{key:"report",value:function(i,t){if(!(!this.beacon&&!this.clsReporter)){this.formatResult(i,t);var n=D(this.params);this.beacon&&this.sendEventsToBeacon(n),this.clsReporter&&this.sendEventsToCLS(n)}}},{key:"setParams",value:function(i){Object.assign(this.params,i)}},{key:"addParamValue",value:function(i,t){this.params[i]=(+this.params[i]+ +t).toFixed(3)}},{key:"sendEventsToBeacon",value:function(i){var t=this.params.requestName==="sliceUploadFile"||this.params.realApi==="sliceUploadFile";if(!(t&&!this.deepTracker)){var n="qcloud_track_cos_sdk";this.delay===0?this.beacon&&this.beacon.onDirectUserAction(n,i):this.beacon&&this.beacon.onUserAction(n,i)}}},{key:"sendEventsToCLS",value:function(i){var t=this.delay===0;this.clsReporter.log(i,t)}},{key:"generateSubTracker",value:function(i){return Object.assign(i,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,accelerate:this.params.accelerate,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.delay,clsReporter:this.clsReporter}),new l(i)}}]),l}();V.exports=f},"./src/util.js":function(V,ae,I){(function(M){var U=I("./node_modules/@babel/runtime/helpers/typeof.js");function s(z,x){var E=typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(!E){if(Array.isArray(z)||(E=L(z))||x){E&&(z=E);var O=0,q=function(){};return{s:q,n:function(){return O>=z.length?{done:!0}:{done:!1,value:z[O++]}},e:function(Be){throw Be},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Q,ne=!0,fe=!1;return{s:function(){E=E.call(z)},n:function(){var Be=E.next();return ne=Be.done,Be},e:function(Be){fe=!0,Q=Be},f:function(){try{ne||E.return==null||E.return()}finally{if(fe)throw Q}}}}function L(z,x){if(z){if(typeof z=="string")return P(z,x);var E={}.toString.call(z).slice(8,-1);return E==="Object"&&z.constructor&&(E=z.constructor.name),E==="Map"||E==="Set"?Array.from(z):E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E)?P(z,x):void 0}}function P(z,x){(x==null||x>z.length)&&(x=z.length);for(var E=0,O=Array(x);E<x;E++)O[E]=z[E];return O}var _=I("./lib/md5.js"),C=I("./lib/crypto.js"),d=I("./node_modules/fast-xml-parser/src/fxp.js"),T=d.XMLParser,h=d.XMLBuilder,k=new T({ignoreDeclaration:!0,ignoreAttributes:!0,parseTagValue:!1}),A=new h,B=I("./lib/base64.js"),w=I("./src/tracker.js"),N=function(x){var E=k.parse(x);return E},H=function(x){var E=A.build(x);return E};function D(z){return encodeURIComponent(z).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function f(z,x){var E=[];for(var O in z)z.hasOwnProperty(O)&&E.push(x?D(O).toLowerCase():O);return E.sort(function(q,Q){return q=q.toLowerCase(),Q=Q.toLowerCase(),q===Q?0:q>Q?1:-1})}var l=function(x,E){var O,q,Q,ne=[],fe=f(x);for(O=0;O<fe.length;O++)q=fe[O],Q=x[q]===void 0||x[q]===null?"":""+x[q],q=E?D(q).toLowerCase():D(q),Q=D(Q)||"",ne.push(q+"="+Q);return ne.join("&")},S=["cache-control","content-disposition","content-encoding","content-length","content-md5","expect","expires","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","transfer-encoding","pic-operations"],i=function(x){var E={};for(var O in x){var q=O.toLowerCase();(q.indexOf("x-cos-")>-1||S.indexOf(q)>-1)&&(E[O]=x[O])}return E},t=function(x){x=x||{};var E=x.SecretId,O=x.SecretKey,q=x.KeyTime,Q=(x.method||x.Method||"get").toLowerCase(),ne=he(x.Query||x.params||{}),fe=i(he(x.Headers||x.headers||{})),ve=x.Key||"",Be;x.UseRawKey?Be=x.Pathname||x.pathname||"/"+ve:(Be=x.Pathname||x.pathname||ve,Be.indexOf("/")!==0&&(Be="/"+Be));var Ee=x.ForceSignHost!==!1;if(!fe.Host&&!fe.host&&x.Bucket&&x.Region&&Ee&&(fe.Host=x.Bucket+".cos."+x.Region+".myqcloud.com"),!E)throw new Error("missing param SecretId");if(!O)throw new Error("missing param SecretKey");var we=Math.round(ze(x.SystemClockOffset)/1e3)-1,Pe=we,Le=x.Expires||x.expires;Le===void 0?Pe+=900:Pe+=Le*1||0;var Je="sha1",Ve=E,xe=q||we+";"+Pe,qe=q||we+";"+Pe,Ke=f(fe,!0).join(";").toLowerCase(),Ye=f(ne,!0).join(";").toLowerCase(),nt=C.HmacSHA1(qe,O).toString(),dt=[Q,Be,Ne.obj2str(ne,!0),Ne.obj2str(fe,!0),""].join(`
`),ft=["sha1",xe,C.SHA1(dt).toString(),""].join(`
`),X=C.HmacSHA1(ft,nt).toString(),ht=["q-sign-algorithm="+Je,"q-ak="+Ve,"q-sign-time="+xe,"q-key-time="+qe,"q-header-list="+Ke,"q-url-param-list="+Ye,"q-signature="+X].join("&");return ht},n=function(x,E,O){var q=E/8,Q=x.slice(O,O+q);return new Uint8Array(Q).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[E](Q)[0]},o=function(x,E,O,q){var Q=x.slice(E,O),ne="";return new Uint8Array(Q).forEach(function(fe){ne+=String.fromCharCode(fe)}),q&&(ne=decodeURIComponent(escape(ne))),ne},c=function(x){for(var E={},O=o(x),q={records:[]};x.byteLength;){var Q=n(x,32,0),ne=n(x,32,4),fe=Q-ne-16,ve=0,Be;for(x=x.slice(12);ve<ne;){var Ee=n(x,8,ve),we=o(x,ve+1,ve+1+Ee),Pe=n(x,16,ve+Ee+2),Le=o(x,ve+Ee+4,ve+Ee+4+Pe);E[we]=Le,ve+=Ee+4+Pe}if(E[":event-type"]==="Records")Be=o(x,ve,ve+fe,!0),q.records.push(Be);else if(E[":event-type"]==="Stats")Be=o(x,ve,ve+fe,!0),q.stats=Ne.xml2json(Be).Stats;else if(E[":event-type"]==="error"){var Je=E[":error-code"],Ve=E[":error-message"],xe=new Error(Ve);xe.message=Ve,xe.name=xe.code=Je,q.error=xe}x=x.slice(ve+fe+4)}return{payload:q.records.join(""),body:O}},p=function(x){var E=this.options.CopySourceParser;if(E)return E(x);var O=x.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/);return O?{Bucket:O[1],Region:O[3],Key:O[7]}:null},b=function(){},R=function(x){var E={};for(var O in x)x.hasOwnProperty(O)&&x[O]!==void 0&&x[O]!==null&&(E[O]=x[O]);return E},j=function(x,E){var O,q=new FileReader;FileReader.prototype.readAsBinaryString?(O=FileReader.prototype.readAsBinaryString,q.onload=function(){E(this.result)}):FileReader.prototype.readAsArrayBuffer&&(O=function(ne){var fe="",ve=new FileReader;ve.onload=function(Be){for(var Ee=new Uint8Array(ve.result),we=Ee.byteLength,Pe=0;Pe<we;Pe++)fe+=String.fromCharCode(Ee[Pe]);E(fe)},ve.readAsArrayBuffer(ne)}),O.call(q,x)},F=function(){var z=function(O,q){O=O.split("."),q=q.split(".");for(var Q=0;Q<q.length;Q++)if(O[Q]!==q[Q])return parseInt(O[Q])>parseInt(q[Q])?1:-1;return 0},x=function(O){if(!O)return!1;var q=(O.match(/Chrome\/([.\d]+)/)||[])[1],Q=(O.match(/QBCore\/([.\d]+)/)||[])[1],ne=(O.match(/QQBrowser\/([.\d]+)/)||[])[1],fe=q&&z(q,"53.0.2785.116")<0&&Q&&z(Q,"3.53.991.400")<0&&ne&&z(ne,"9.0.2524.400")<=0||!1;return fe};return x(typeof navigator<"u"&&navigator.userAgent)}(),J=function(x,E,O,q,Q){var ne;if(x.slice?ne=x.slice(E,O):x.mozSlice?ne=x.mozSlice(E,O):x.webkitSlice&&(ne=x.webkitSlice(E,O)),q&&F){var fe=new FileReader;fe.onload=function(ve){ne=null,Q(new Blob([fe.result]))},fe.readAsArrayBuffer(ne)}else Q(ne)},$=function(x,E,O,q){O=O||b,x?typeof E=="string"?O(Ne.md5(E,!0)):Blob&&E instanceof Blob?Ne.getFileMd5(E,function(Q,ne){O(ne)},q):O():O()},Y=1024*1024,te=function(x,E,O){var q=x.size,Q=0,ne=_.getCtx(),fe=function ve(Be){if(Be>=q){var Ee=ne.digest("hex");E(null,Ee);return}var we=Math.min(q,Be+Y);Ne.fileSlice(x,Be,we,!1,function(Pe){j(Pe,function(Le){Pe=null,ne=ne.update(Le,!0),Q+=Le.length,Le=null,O&&O({loaded:Q,total:q,percent:Math.round(Q/q*1e4)/1e4}),ve(Be+Y)})})};fe(0)};function he(z){return ce(z,function(x){return U(x)==="object"&&x!==null?he(x):x})}function ue(z,x,E){return z&&x in z?z[x]:E}function ie(z,x){return de(x,function(E,O){z[O]=x[O]}),z}function Z(z){return z instanceof Array}function G(z,x){for(var E=!1,O=0;O<z.length;O++)if(x===z[O]){E=!0;break}return E}function ee(z){return Z(z)?z:[z]}function de(z,x){for(var E in z)z.hasOwnProperty(E)&&x(z[E],E)}function ce(z,x){var E=Z(z)?[]:{};for(var O in z)z.hasOwnProperty(O)&&(E[O]=x(z[O],O));return E}function re(z,x){var E=Z(z),O=E?[]:{};for(var q in z)z.hasOwnProperty(q)&&x(z[q],q)&&(E?O.push(z[q]):O[q]=z[q]);return O}var oe=function(x){var E,O,q,Q="";for(E=0,O=x.length/2;E<O;E++)q=parseInt(x[E*2]+x[E*2+1],16),Q+=String.fromCharCode(q);return btoa(Q)},ye=function(){var x=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return x()+x()+"-"+x()+"-"+x()+"-"+x()+"-"+x()+x()+x()},ge=function(x,E){var O=E.Bucket,q=E.Region,Q=E.Key,ne=this.options.Domain,fe=!ne||typeof ne=="string"&&ne.indexOf("{Bucket}")>-1,ve=!ne||typeof ne=="string"&&ne.indexOf("{Region}")>-1;if(x.indexOf("Bucket")>-1||x==="deleteMultipleObject"||x==="multipartList"||x==="listObjectVersions"){if(fe&&!O)return"Bucket";if(ve&&!q)return"Region"}else if(x.indexOf("Object")>-1||x.indexOf("multipart")>-1||x==="sliceUploadFile"||x==="abortUploadTask"||x==="uploadFile"){if(fe&&!O)return"Bucket";if(ve&&!q)return"Region";if(!Q)return"Key"}return!1},ke=function(x,E){if(E=ie({},E),x!=="getAuth"&&x!=="getV4Auth"&&x!=="getObjectUrl"){var O=E.Headers||{};if(E&&U(E)==="object"){(function(){for(var Q in E)E.hasOwnProperty(Q)&&Q.indexOf("x-cos-")>-1&&(O[Q]=E[Q])})();var q={"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext","Pic-Operations":"PicOperations","x-cos-callback":"Callback","x-cos-callback-var":"CallbackVar","x-cos-return-body":"ReturnBody"};Ne.each(q,function(Q,ne){E[Q]!==void 0&&(O[ne]=E[Q])}),E.Headers=R(O)}}return E},me=function(x,E){return function(O,q){var Q=this;typeof O=="function"&&(q=O,O={}),O=ke(x,O);var ne;if(Q.options.EnableReporter)if(O.calledBySdk==="sliceUploadFile"||O.calledBySdk==="sliceCopyFile")ne=O.tracker&&O.tracker.generateSubTracker({apiName:x});else if(["uploadFile","uploadFiles"].includes(x))ne=null;else{var fe=0;O.Body&&(fe=typeof O.Body=="string"?O.Body.length:O.Body.size||O.Body.byteLength||0);var ve=Q.options.UseAccelerate||typeof Q.options.Domain=="string"&&Q.options.Domain.includes("accelerate.");ne=new w({Beacon:Q.options.BeaconReporter,clsReporter:Q.options.ClsReporter,bucket:O.Bucket,region:O.Region,apiName:x,realApi:x,accelerate:ve,fileKey:O.Key,fileSize:fe,deepTracker:Q.options.DeepTracker,customId:Q.options.CustomId,delay:Q.options.TrackerDelay})}O.tracker=ne;var Be=function(xe){return xe&&xe.headers&&(xe.headers["x-cos-request-id"]&&(xe.RequestId=xe.headers["x-cos-request-id"]),xe.headers["x-ci-request-id"]&&(xe.RequestId=xe.headers["x-ci-request-id"]),xe.headers["x-cos-version-id"]&&(xe.VersionId=xe.headers["x-cos-version-id"]),xe.headers["x-cos-delete-marker"]&&(xe.DeleteMarker=xe.headers["x-cos-delete-marker"])),xe},Ee=function(xe,qe){ne&&ne.report(xe,qe),q&&q(Be(xe),Be(qe))},we=function(){if(x!=="getService"&&x!=="abortUploadTask"){var xe=ge.call(Q,x,O);if(xe)return"missing param "+xe;if(O.Region){if(Q.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(O.Region))return"Region format error."}else{if(O.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(O.Region))return"Region format error."}!Q.options.CompatibilityMode&&O.Region.indexOf("-")===-1&&O.Region!=="yfb"&&O.Region!=="default"&&O.Region}if(O.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(O.Bucket))if(O.AppId)O.Bucket=O.Bucket+"-"+O.AppId;else if(Q.options.AppId)O.Bucket=O.Bucket+"-"+Q.options.AppId;else return'Bucket should format as "test-1250000000".';O.AppId&&delete O.AppId}!Q.options.UseRawKey&&O.Key&&O.Key.substr(0,1)==="/"&&(O.Key=O.Key.substr(1))}},Pe=we(),Le=["getAuth","getObjectUrl"].includes(x);if(typeof Promise=="function"&&!Le&&!q)return new Promise(function(Ve,xe){if(q=function(Ke,Ye){Ke?xe(Ke):Ve(Ye)},Pe)return Ee(Ne.error(new Error(Pe)));E.call(Q,O,Ee)});if(Pe)return Ee(Ne.error(new Error(Pe)));var Je=E.call(Q,O,Ee);if(Le)return Je}},Re=function(x,E){var O=this,q=0,Q=0,ne=Date.now(),fe,ve;function Be(){if(ve=0,E&&typeof E=="function"){fe=Date.now();var Ee=Math.max(0,Math.round((Q-q)/((fe-ne)/1e3)*100)/100)||0,we;Q===0&&x===0?we=1:we=Math.floor(Q/x*100)/100||0,ne=fe,q=Q;try{E({loaded:Q,total:x,speed:Ee,percent:we})}catch{}}}return function(Ee,we){if(Ee&&(Q=Ee.loaded,x=Ee.total),we)clearTimeout(ve),Be();else{if(ve)return;ve=setTimeout(Be,O.options.ProgressInterval)}}},Oe=function(x,E,O){var q;if(typeof E.Body=="string"?E.Body=new Blob([E.Body],{type:"text/plain"}):E.Body instanceof ArrayBuffer&&(E.Body=new Blob([E.Body])),E.Body&&(E.Body instanceof Blob||E.Body.toString()==="[object File]"||E.Body.toString()==="[object Blob]"))q=E.Body.size;else{O(Ne.error(new Error("params body format error, Only allow File|Blob|String.")));return}E.ContentLength=q,O(null,q)},ze=function(x){return Date.now()+(x||0)},Me=function(x,E){var O=x;return x.message=x.message||null,typeof E=="string"?(x.error=E,x.message=E):U(E)==="object"&&E!==null&&(ie(x,E),(E.code||E.name)&&(x.code=E.code||E.name),E.message&&(x.message=E.message),E.stack&&(x.stack=E.stack)),typeof Object.defineProperty=="function"&&(Object.defineProperty(x,"name",{writable:!0,enumerable:!1}),Object.defineProperty(x,"message",{enumerable:!0})),x.name=E&&E.name||x.name||x.code||"Error",x.code||(x.code=x.name),x.error||(x.error=he(O)),x},De=function(){return(typeof globalThis>"u"?"undefined":U(globalThis))==="object"&&(globalThis.constructor.name==="DedicatedWorkerGlobalScope"||globalThis.FileReaderSync)},$e=function(){return(typeof window>"u"?"undefined":U(window))!=="object"&&(typeof M>"u"?"undefined":U(M))==="object"&&!0&&!De()},je=function(x){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(x)},We=function(){if((typeof navigator>"u"?"undefined":U(navigator))!=="object")return!1;var z=navigator.userAgent,x=!!z.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return x}(),tt=function(){return(typeof navigator>"u"?"undefined":U(navigator))!=="object"?!1:/\sQQ/i.test(navigator.userAgent)}(),ut=function(x,E){var O=B.encode(x);return E&&(O=O.replaceAll("+","-").replaceAll("/","_").replaceAll("=","")),O},ct=function(x){return x?B.decode(x):""},at=function(x){var E=x.split("/"),O=[],q=s(E),Q;try{for(q.s();!(Q=q.n()).done;){var ne=Q.value;ne===".."?O.length&&O.pop():ne.length&&ne!=="."&&O.push(ne)}}catch(fe){q.e(fe)}finally{q.f()}return"/"+O.join("/")},lt=function(x){var E;if(x&&typeof x=="string"){var O=x.trim(),q=O.indexOf("<")===0,Q=O.indexOf("{")===0;if(q)E=Ne.xml2json(x)||{};else if(Q)try{var ne=x.replace(/\n/g," "),fe=JSON.parse(ne);Object.prototype.toString.call(fe)==="[object Object]"?E=fe:E=x}catch{E=x}else E=x}else E=x||{};return E},Ne={noop:b,formatParams:ke,apiWrapper:me,xml2json:N,json2xml:H,md5:_,clearKey:R,fileSlice:J,getBodyMd5:$,getFileMd5:te,b64:oe,extend:ie,isArray:Z,isInArray:G,makeArray:ee,each:de,map:ce,filter:re,clone:he,attr:ue,uuid:ye,camSafeUrlEncode:D,throttleOnProgress:Re,getFileSize:Oe,getSkewTime:ze,error:Me,obj2str:l,getAuth:t,parseSelectPayload:c,getSourceParams:p,isBrowser:!0,isNode:$e,isCIHost:je,isIOS_QQ:We&&tt,encodeBase64:ut,decodeBase64:ct,simplifyPath:at,readAsBinaryString:j,parseResBody:lt};V.exports=Ne}).call(this,I("./node_modules/process/browser.js"))}})})}(st)),st.exports}var Pt=Et();const It=At(Pt);export{It as C};
